{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\game.js"],"names":["cc","Class","extends","Component","properties","paiPrefab","default","type","Prefab","spriteFrames","SpriteFrame","tutorial","Node","startButton","Button","hintButton","scoreLabel","Label","_paiSprites","_pais","rows","columns","paiWidth","paiHeight","paddingLeft","paddingTop","solutionx1","solutiony1","solutionx2","solutiony2","suggestionTimer","_lastPai","lastX","lastY","score","startTime","lastMatchTime","moveDirection","moveStart","moveEnd","moveMin","moveMax","originalX","originalY","mouseDown","count","coward","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","active","event","keyCode","macro","KEY","n","getComponent","i","index","x","y","color","Color","WHITE","onDestroy","pais","j","sys","localStorage","setItem","log","onGameHints","clearTimeout","string","toString","setTimeout","highLightSolution","onGameStart","Array","self","newNode","instantiate","Sprite","spriteFrame","Math","trunc","node","addChild","setPosition","v2","TOUCH_END","onTouchEnd","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","paisStorage","getItem","split","shuffle","enabled","resetScore","d","Date","floor","getTime","updateScore","width","height","stopHighLightSolution","diedGame","livePai","map","pai","t","o","push","staticLiveGame","delta","c","k","temp","mode","centerx","centery","offset","key","length","connected","adjustPosition","x1","y1","x2","y2","small","big","adjusted1","adjusted2","row","column","zIndex","currentPai","getLocationY","getLocationX","currentX","currentY","match","lowX","min","lowY","highX","max","highY","random","runAction","winSplash","reshuffle","GRAY","getDelta","location","getLocation","abs","round","matchFound","switchPai","tempType","tempX","tempY","targetType","targetX","targetY","indexes","array","m","init","moveTo","start","moveBy","easing","easeCubicActionOut","scaleUp","scaleTo","move","scaleDown","end","repeatForever","sequence"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        paiPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        spriteFrames: {\r\n            default: [],\r\n            type: [cc.SpriteFrame]\r\n        },\r\n\r\n        tutorial: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        startButton: {\r\n            default: null,\r\n            type: cc.Button\r\n        },\r\n        hintButton: {\r\n            default: null,\r\n            type: cc.Button\r\n        },\r\n        scoreLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        }\r\n        ,\r\n        _paiSprites: {\r\n            default: [],\r\n            type: [cc.Node]\r\n        },\r\n\r\n        _pais: null,\r\n\r\n        rows: 8,\r\n        columns: 17,\r\n\r\n        paiWidth: 60,\r\n        paiHeight: 90,\r\n\r\n        paddingLeft: 640,\r\n        paddingTop: 360, //360,\r\n        solutionx1: -1,\r\n        solutiony1: -1,\r\n        solutionx2: -1,\r\n        solutiony2: -1,\r\n        suggestionTimer: null,\r\n\r\n        _lastPai: null,\r\n        lastX: 0,\r\n        lastY: 0,\r\n        score: 0,\r\n        startTime: 0,\r\n        lastMatchTime: 0,\r\n\r\n        moveDirection: -1,\r\n        moveStart: 0,\r\n        moveEnd: 0,\r\n        moveMin: 0,\r\n        moveMax: 0,\r\n        originalX: 0,\r\n        originalY: 0,\r\n\r\n        mouseDown: false,\r\n        count: 0,\r\n\r\n        coward: false\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this)\r\n        \r\n        this.hintButton.active = false;\r\n    },\r\n\r\n    onKeyDown (event) {\r\n        switch(event.keyCode) {\r\n            case cc.macro.KEY.n:\r\n                if (this.coward && this._lastPai != null && this._lastPai.getComponent('Pai').type != -1) {\r\n                    for (var i = 0; i < 4; i++) {\r\n                        var index = this._pais[this._lastPai.getComponent('Pai').type  * 4 + i]\r\n                        if (index != null) {\r\n                            this._paiSprites[index.x][index.y].color = cc.Color.WHITE\r\n                        }\r\n                    }\r\n                }\r\n                this.coward = !this.coward\r\n                break\r\n        }\r\n    },\r\n\r\n    onDestroy () {\r\n        var pais = \"\"\r\n        for (var i = 0; i < this.rows; i++) {\r\n            for (var j = 0; j < this.columns; j++) {\r\n                pais += this._paiSprites[i][j].getComponent('Pai').type + \" \"\r\n            }\r\n        }\r\n        cc.sys.localStorage.setItem('pais', pais)\r\n        cc.log('save state')\r\n    },\r\n    onGameHints() {\r\n        clearTimeout(this.suggestionTimer);\r\n        this.score += 15;\r\n        this.scoreLabel.string = this.score.toString();\r\n        this.suggestionTimer = setTimeout(\r\n            () => { \r\n                this.highLightSolution(); \r\n            }\r\n            , 500);\r\n    },\r\n    onGameStart () {\r\n        this._pais = new Array(this.rows * this.columns)\r\n        this._paiSprites = new Array(this.rows)\r\n        for (var i = 0; i < this.rows; i++) {\r\n            this._paiSprites[i] = new Array(this.columns)\r\n            for (var j = 0; j < this.columns; j++) {\r\n                this._paiSprites[i][j] = null\r\n            }\r\n        }\r\n\r\n        var self = this\r\n        for (var i = 0; i < this.rows; i++) {\r\n            for (var j = 0; j < this.columns; j++) {\r\n                var newNode = cc.instantiate(this.paiPrefab)\r\n                newNode.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[Math.trunc((i * this.rows + j) / 4)]\r\n                this._paiSprites[i][j] = newNode\r\n                this.node.addChild(newNode)\r\n                newNode.setPosition(cc.v2(this.paiWidth * j - this.paddingLeft, this.paiHeight * i - this.paddingTop))\r\n            }\r\n        }\r\n        this.node.on(cc.Node.EventType.TOUCH_END, function(event) {\r\n            this.onTouchEnd(event, self)\r\n        }, this)\r\n        this.node.on(cc.Node.EventType.TOUCH_START, function(event) {\r\n            this.onTouchStart(event, self)\r\n        }, this)\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, function(event) {\r\n            this.onTouchMove(event, self)\r\n        }, this)\r\n\r\n        var paisStorage = cc.sys.localStorage.getItem('pais')\r\n        if (paisStorage != null) {\r\n            var pais = paisStorage.split(' ')\r\n            for (var i = 0; i < this.rows; i++) {\r\n                for (var j = 0; j < this.columns; j++) {\r\n                    this._paiSprites[i][j].getComponent(cc.Sprite).spriteFrame = this.spriteFrames[pais[i * columns + j] == -1 ? 34 : pais[i * columns + j]]\r\n                    this._paiSprites[i][j].getComponent('Pai').type = pais[i * columns + j]\r\n                }\r\n            }\r\n        } else {\r\n            this.shuffle()\r\n        }\r\n        this.tutorial.active = false\r\n        this.startButton.active = false\r\n        this.startButton.enabled = false\r\n        //this.hintButton.enabled = true;\r\n        this.hintButton.active = true;\r\n        this.hintButton.enabled = true;\r\n        this.hintButton.node.active = true;\r\n        this.resetScore();\r\n\r\n    },\r\n    resetScore() {\r\n        this.score = 0;\r\n        var d = new Date();\r\n        var n = Math.floor(d.getTime() / 1000);\r\n        this.startTime = n;\r\n        this.lastMatchTime = n;\r\n        this.scoreLabel.string = this.score.toString();\r\n    },\r\n    updateScore() {\r\n        var d = new Date();\r\n        var n = Math.floor(d.getTime() / 1000);\r\n        this.score += n - this.lastMatchTime;\r\n        this.lastMatchTime = n;\r\n        \r\n        this.scoreLabel.string = this.score.toString();\r\n    },\r\n\r\n    highLightSolution() {\r\n        if (this.solutionx1 >= 0 && this.solutionx2 >= 0 && this.solutiony1 >= 0 && this.solutiony2 >= 0) {\r\n            this._paiSprites[this.solutionx1][this.solutiony1].width = this.paiWidth + 15;\r\n            this._paiSprites[this.solutionx1][this.solutiony1].height = this.paiHeight + 15;\r\n            this._paiSprites[this.solutionx2][this.solutiony2].width = this.paiWidth + 15;\r\n            this._paiSprites[this.solutionx2][this.solutiony2].height = this.paiHeight + 15;\r\n        }\r\n        setTimeout(() => {this.stopHighLightSolution()}, 300);\r\n    },\r\n    stopHighLightSolution() {\r\n        if (this.solutionx1 >= 0 && this.solutionx2 >= 0 && this.solutiony1 >= 0 && this.solutiony2 >= 0) {\r\n            this._paiSprites[this.solutionx1][this.solutiony1].width = this.paiWidth;\r\n            this._paiSprites[this.solutionx1][this.solutiony1].height = this.paiHeight;\r\n            this._paiSprites[this.solutionx2][this.solutiony2].width = this.paiWidth;\r\n            this._paiSprites[this.solutionx2][this.solutiony2].height = this.paiHeight;\r\n        }\r\n    },\r\n\r\n    diedGame() {\r\n        var livePai = {}\r\n        var map = new Array(this.rows);\r\n\r\n        for (var i = 0; i < this.rows; i++) {\r\n            map[i] = [];\r\n            for (var j = 0; j < this.columns; j++) {\r\n                var pai = this._paiSprites[i][j].getComponent('Pai');\r\n                var t = pai.type;\r\n                var o = {type: t, x: i, y: j};\r\n                map[i].push(o);\r\n                if (t == -1) {\r\n                    continue;\r\n                }\r\n\r\n                if (t in livePai) {\r\n                    livePai[t].push(o);\r\n                } else {\r\n                    livePai[t] = [o];\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.staticLiveGame(map, livePai, 0, 0, 0, 0)) {\r\n            return false;\r\n        }\r\n\r\n        for (var i = 0; i < this.rows; i++) {\r\n            for (var j = 0; j < this.columns; j++) {\r\n                if (map[i][j].type != -1) {\r\n                    continue;\r\n                }\r\n\r\n                // ======================\r\n                // try to move left pais to current location\r\n                var x = i - 1;\r\n                while(x>-1 && map[x][j].type < 0) {\r\n                    x--;\r\n                }\r\n\r\n                // if x >= 0, that mean there is pai on left can be moved\r\n                if (x >= 0) {\r\n                    var delta = i - x;\r\n                    var c = 0;\r\n                    while((x-c)>=0 && map[x-c][j].type >= 0) {\r\n                        c++;\r\n                    }\r\n\r\n                    // move pai\r\n                    for(var k=0;k<c;k++) {\r\n                        var temp = map[i-k][j];\r\n                        map[i-k][j] = map[x-k][j];\r\n                        map[i-k][j].x = i-k;\r\n                        map[x-k][j] = temp;\r\n                        map[x-k][j].x = x-k;\r\n                    }\r\n\r\n                    if(this.staticLiveGame(map, livePai, 1, i, j, delta, c)) {\r\n                        return false;\r\n                    }\r\n\r\n                    // resume pai\r\n                    for(var k = c-1; k >= 0; k--) {\r\n                        var temp = map[i-k][j];\r\n                        map[i-k][j] = map[x-k][j];\r\n                        map[i-k][j].x = i-k;\r\n                        map[x-k][j] = temp;\r\n                        map[x-k][j].x = x-k;\r\n                    }\r\n                    \r\n                }\r\n                // ====================\r\n                // try to move right pais to current location\r\n                x = i + 1;\r\n                while(x < this.rows && map[x][j].type < 0) {\r\n                    x++;\r\n                }\r\n\r\n                // if x < columns, that mean there is pai on right can be moved\r\n                if (x < this.rows) {\r\n                    var delta = x - i;\r\n                    var c = 0;\r\n                    while((x+c) < this.rows && map[x+c][j].type >= 0) {\r\n                        c++;\r\n                    }\r\n\r\n                    // move pai\r\n                    for(var k=0;k<c;k++) {\r\n                        var temp = map[i+k][j];\r\n                        map[i+k][j] = map[x+k][j];\r\n                        map[i+k][j].x = i+k;\r\n                        map[x+k][j] = temp;\r\n                        map[x+k][j].x = x+k;\r\n                    }\r\n\r\n                    if(this.staticLiveGame(map, livePai, 2, i, j, delta, c)) {\r\n                        return false;\r\n                    }\r\n\r\n                    // resume pai\r\n                    for(var k = c-1; k >= 0; k--) {\r\n                        var temp = map[i+k][j];\r\n                        map[i+k][j] = map[x+k][j];\r\n                        map[i+k][j].x = i+k;\r\n                        map[x+k][j] = temp;\r\n                        map[x+k][j].x = x+k;\r\n                    }\r\n                    \r\n                }\r\n\r\n                // ====================================\r\n                x = j - 1;\r\n                while(x > -1 && map[i][x].type < 0) {\r\n                    x--;\r\n                }\r\n\r\n                // if x >= 0, that mean there is pai  can be moved\r\n                if (x >= 0) {\r\n                    var delta = j - x;\r\n                    var c = 0;\r\n                    while((x-c)>=0 && map[i][x-c].type >= 0) {\r\n                        c++;\r\n                    }\r\n\r\n                    // move pai\r\n                    for(var k=0;k<c;k++) {\r\n                        var temp = map[i][j-k];\r\n                        map[i][j-k] = map[i][x-k];\r\n                        map[i][j-k].y = j-k;\r\n                        map[i][x-k] = temp;\r\n                        map[i][x-k].y = x-k;\r\n                    }\r\n\r\n                    if(this.staticLiveGame(map, livePai, 3, i, j, delta, c)) {\r\n                        return false;\r\n                    }\r\n\r\n                    // resume pai\r\n                    for(var k = c-1; k >= 0; k--) {\r\n                        var temp = map[i][j-k];\r\n                        map[i][j-k] = map[i][x-k];\r\n                        map[i][j-k].y = j-k;\r\n                        map[i][x-k] = temp;\r\n                        map[i][x-k].y = x-k;\r\n                    }\r\n                    \r\n                }\r\n                // ====================\r\n                // try to move right pais to current location\r\n                x = j + 1;\r\n                while(x < this.columns && map[i][x].type < 0) {\r\n                    x++;\r\n                }\r\n\r\n                // if x < columns, that mean there is pai on right can be moved\r\n                if (x < this.columns) {\r\n                    var delta = x - j;\r\n                    var c = 0;\r\n                    while((x+c) < this.columns && map[i][x+c].type >= 0) {\r\n                        c++;\r\n                    }\r\n\r\n                    // move pai\r\n                    for(var k=0;k<c;k++) {\r\n                        var temp = map[i][j+k];\r\n                        map[i][j+k] = map[i][x+k];\r\n                        map[i][j+k].y = j+k;\r\n                        map[i][x+k] = temp;\r\n                        map[i][x+k].y = x+k;\r\n                    }\r\n\r\n                    if(this.staticLiveGame(map, livePai, 4, i, j, delta, c)) {\r\n                        return false;\r\n                    }\r\n\r\n                    // resume pai\r\n                    for(var k = c-1; k >= 0; k--) {\r\n                        var temp = map[i][j+k];\r\n                        map[i][j+k] = map[i][x+k];\r\n                        map[i][j+k].y = j+k;\r\n                        map[i][x+k] = temp;\r\n                        map[i][x+k].y = x+k;\r\n                    }\r\n                    \r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    },\r\n    // check map, if there steps available\r\n    staticLiveGame(map, livePai, mode, centerx, centery, offset, count) {\r\n        for(var key in livePai) {\r\n            var pais = livePai[key];\r\n            for(var i=0;i<pais.length-1;i++) {\r\n                for(var j=i+1;j<pais.length;j++) {\r\n                    if (this.connected(map, pais[i].x, pais[i].y, pais[j].x, pais[j].y, mode, centerx, centery, offset, count)) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    adjustPosition(x, y, mode, centerx, centery, offset, count) {\r\n        if (mode == 1) {\r\n            if (y == centery) {\r\n                if (x <= centerx && x >= (centerx-count)) {\r\n                    return [x - offset, y];\r\n                }\r\n            }\r\n        }\r\n\r\n        if (mode == 2) {\r\n            if (y == centery) {\r\n                if (x <= (centerx + count) && x >= centerx) {\r\n                    return [x + offset, y];\r\n                }\r\n            }\r\n        }\r\n\r\n        if (mode == 3) {\r\n            if (x == centerx) {\r\n                if (y < centery && y >= centery - count) {\r\n                    return [x, y - offset];\r\n                }\r\n            }\r\n        }\r\n\r\n        if (mode == 4) {\r\n            if (x == centerx) {\r\n                if (y <= (centery + count) && y >= centery) {\r\n                    return [x, y + offset];\r\n                }\r\n            }\r\n        }\r\n\r\n        return [x, y];\r\n    },\r\n    connected(map, x1, y1, x2, y2, mode, centerx, centery, offset, count) {\r\n        if (x1 == x2) {\r\n            var small = y1;\r\n            var big = y2;\r\n            if (y1 > y2) {\r\n                small = y2;\r\n                big = y1;\r\n            }\r\n\r\n            for (var i = small+1; i < big; i++ )\r\n            {\r\n                if (map[x1][i].type != -1) {\r\n                    return false;\r\n                }\r\n            }\r\n            var adjusted1 = this.adjustPosition(x1, y1, mode, centerx, centery, offset, count);\r\n            var adjusted2 = this.adjustPosition(x2, y2, mode, centerx, centery, offset, count);\r\n            this.solutionx1 = adjusted1[0];\r\n            this.solutiony1 = adjusted1[1];\r\n            this.solutionx2 = adjusted2[0];\r\n            this.solutiony2 = adjusted2[1];\r\n            cc.log(\"connected: \" + adjusted1[0].toString() + \", \" + adjusted1[1].toString() + \"; \" + adjusted2[0].toString() + \", \" + adjusted2[1].toString())\r\n            return true;\r\n        }\r\n\r\n        if (y1 == y2) {\r\n            var small = x1;\r\n            var big = x2;\r\n            if (x1 > x2) {\r\n                small = x2;\r\n                big = x1;\r\n            }\r\n\r\n            for (var i = small+1; i < big; i++ )\r\n            {\r\n                if (map[i][y1].type != -1) {\r\n                    return false;\r\n                }\r\n            }\r\n            var adjusted1 = this.adjustPosition(x1, y1, mode, centerx, centery, offset, count);\r\n            var adjusted2 = this.adjustPosition(x2, y2, mode, centerx, centery, offset, count);\r\n            this.solutionx1 = adjusted1[0];\r\n            this.solutiony1 = adjusted1[1];\r\n            this.solutionx2 = adjusted2[0];\r\n            this.solutiony2 = adjusted2[1];\r\n            cc.log(\"connected: \" + adjusted1[0].toString() + \", \" + adjusted1[1].toString() + \"; \" + adjusted2[0].toString() + \", \" + adjusted2[1].toString())\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    onTouchStart (event, self) {\r\n        if (self.mouseDown === true && self._lastPai != null) {\r\n            var row = self._lastPai.getComponent('Pai').x\r\n            var column = self._lastPai.getComponent('Pai').y\r\n            if (self.moveDirection === 0) {\r\n                for (var j = self.moveStart; j <= self.moveEnd; j++) {\r\n                    self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\r\n                    self._paiSprites[row][j].zIndex = 0\r\n                }\r\n            } else if (self.moveDirection === 1) {\r\n                for (var i = self.moveStart; i <= self.moveEnd; i++) {\r\n                    self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\r\n                    self._paiSprites[i][column].zIndex = 0\r\n                }\r\n            }\r\n        }\r\n        self.mouseDown = true\r\n        var currentPai = self._paiSprites[Math.floor(event.getLocationY() / this.paiHeight)][Math.floor(event.getLocationX() / this.paiWidth)]\r\n        if (self._lastPai != null) {\r\n            self._lastPai.color = cc.Color.WHITE\r\n            if (self.coward && self._lastPai.getComponent('Pai').type != -1) {\r\n                for (var i = 0; i < 4; i++) {\r\n                    var index = self._pais[self._lastPai.getComponent('Pai').type  * 4 + i]\r\n                    if (index != null) {\r\n                        self._paiSprites[index.x][index.y].color = cc.Color.WHITE\r\n                    }\r\n                }\r\n            }\r\n            if (currentPai.getComponent('Pai').type === self._lastPai.getComponent('Pai').type && self._lastPai.getComponent('Pai').type != -1 && currentPai != self._lastPai) {\r\n                var currentX = currentPai.getComponent('Pai').x\r\n                var currentY = currentPai.getComponent('Pai').y\r\n                var lastX = self._lastPai.getComponent('Pai').x\r\n                var lastY = self._lastPai.getComponent('Pai').y\r\n\r\n                cc.log(\"current: \" + currentX + \",\" + currentY)\r\n                cc.log(\"last: \" + lastX + \",\" + lastY)\r\n                var match = true\r\n                var lowX = Math.min(currentX, lastX)\r\n                var lowY = Math.min(currentY, lastY)\r\n                var highX = Math.max(currentX, lastX)\r\n                var highY = Math.max(currentY, lastY)\r\n\r\n                if ((currentX < lastX && currentY < lastY) || (currentX >= lastX && currentY >= lastY)) {\r\n                    cc.log(\"a\")\r\n                    for (var i = lowX + 1; i <= highX; i++) {\r\n                        cc.log(\"a1: \" + i + \",\" + lowY + \":\" + self._paiSprites[i][lowY].getComponent('Pai').type)\r\n                        if (i != highX && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\r\n                            match = false\r\n                            break\r\n                        }\r\n                    }\r\n\r\n                    if (match) {\r\n                        for (var j = lowY; j < highY; j++) {\r\n                            cc.log(\"a2: \" + highX + \",\" + j + \":\" + self._paiSprites[highX][j].getComponent('Pai').type)\r\n                            if (self._paiSprites[highX][j].getComponent('Pai').type != -1) {\r\n                                match = false\r\n                                break\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (!match) {\r\n                        match = true\r\n                        for (var j = lowY + 1; j <= highY; j++) {\r\n                            cc.log(\"a3: \" + lowX + \",\" + j + \":\" + self._paiSprites[lowX][j].getComponent('Pai').type)\r\n                            if (j != highY && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\r\n                                match = false\r\n                                break\r\n                            }\r\n                        }\r\n\r\n                        if (match) {\r\n                            for (var i = lowX; i < highX; i++) {\r\n                                cc.log(\"a4: \" + i + \",\" + highY + \":\" + self._paiSprites[i][highY].getComponent('Pai').type)\r\n                                if (self._paiSprites[i][highY].getComponent('Pai').type != -1) {\r\n                                    match = false\r\n                                    break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                } else if ((currentX >= lastX && currentY < lastY) || (currentX < lastX && currentY >= lastY)) {\r\n                    cc.log(\"b\")\r\n                    for (var i = lowX + 1; i <= highX; i++) {\r\n                        cc.log(\"b1: \" + i + \",\" + highY + \":\" + self._paiSprites[i][highY].getComponent('Pai').type)\r\n                        if (i != highX && self._paiSprites[i][highY].getComponent('Pai').type != -1) {\r\n                            match = false\r\n                            break\r\n                        }\r\n                    }\r\n\r\n                    if (match) {\r\n                        for (var j = highY; j > lowY; j--) {\r\n                            cc.log(\"b2: \" + highX + \",\" + j + \":\" + self._paiSprites[highX][j].getComponent('Pai').type)\r\n                            if (self._paiSprites[highX][j].getComponent('Pai').type != -1) {\r\n                                match = false\r\n                                break\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (!match) {\r\n                        match = true\r\n                        for (var j = highY - 1; j >= lowY; j--) {\r\n                            cc.log(\"b3: \" + lowX + \",\" + j + \":\" + self._paiSprites[lowX][j].getComponent('Pai').type)\r\n                            if (j != lowY && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\r\n                                match = false\r\n                                break\r\n                            }\r\n                        }\r\n\r\n                        if (match) {\r\n                            for (var i = lowX; i < highX; i++) {\r\n                                cc.log(\"b4: \" + i + \",\" + lowY + \":\" + self._paiSprites[i][lowY].getComponent('Pai').type)\r\n                                if (self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\r\n                                    match = false\r\n                                    break\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (match) {\r\n                    currentPai.getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\r\n                    currentPai.width = this.paiWidth\r\n                    currentPai.height = this.paiHeight\r\n                    self._lastPai.getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\r\n                    self._lastPai.width = this.paiWidth\r\n                    self._lastPai.height = this.paiHeight\r\n                    currentPai.getComponent('Pai').type = -1\r\n                    self._lastPai.getComponent('Pai').type = -1\r\n                    self._pais[self._lastPai.index] = null\r\n                    self._pais[currentPai.index] = null\r\n                    currentPai.color = cc.Color.WHITE\r\n                    \r\n                    this.updateScore();\r\n\r\n                    self.count += 2\r\n                    if (self.count >= self.rows * self.columns) {\r\n                        for (var i = 0; i < this.rows; i++) {\r\n                            for (var j = 0; j < this.columns; j++) {\r\n                                self._paiSprites[i][j].getComponent(cc.Sprite).spriteFrame = this.spriteFrames[Math.trunc(Math.random() * 35)]\r\n                                self._paiSprites[i][j].runAction(self.winSplash())\r\n                            }\r\n                        }\r\n                    } else {\r\n                        cc.log(\"Check died game:\");\r\n                        while(this.diedGame()) {\r\n                            this.reshuffle();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        currentPai.color = cc.Color.GRAY\r\n        self._lastPai = currentPai\r\n        if (self.coward && currentPai.getComponent('Pai').type != -1) {\r\n            for (var i = 0; i < 4; i++) {\r\n                var index = self._pais[currentPai.getComponent('Pai').type * 4 + i]\r\n                if (index != null && self._paiSprites[index.x][index.y].getComponent('Pai').type != -1) {\r\n                    self._paiSprites[index.x][index.y].color = cc.Color.GRAY\r\n                }\r\n            }\r\n        }\r\n        self.originalX = currentPai.getComponent('Pai').x\r\n        self.originalY = currentPai.getComponent('Pai').y\r\n    },\r\n\r\n    onTouchMove (event, self) {\r\n        var delta = event.getDelta()\r\n        var location = event.getLocation()\r\n        if (self._lastPai != null && self._lastPai.getComponent('Pai').type != -1) {\r\n            var x = self._lastPai.getComponent('Pai').x\r\n            var y = self._lastPai.getComponent('Pai').y\r\n            if (self.moveDirection === -1) {\r\n                if (Math.abs(delta.x) > Math.abs(delta.y)) {\r\n                    self.moveDirection = 0\r\n                    if (y === 0) {\r\n                        self.moveStart = 0\r\n                        self.moveMin = 0\r\n                    } else {\r\n                        var i = y - 1\r\n                        while (i >= 0 && self._paiSprites[x][i].getComponent('Pai').type != -1) {\r\n                            i--\r\n                        }\r\n                        self.moveStart = i + 1\r\n                        while (i >= 0 && self._paiSprites[x][i].getComponent('Pai').type === -1) {\r\n                            i--\r\n                        }\r\n                        self.moveMin = i + 1\r\n                    }\r\n                    if (y === self.columns - 1) {\r\n                        self.moveEnd = self.columns - 1\r\n                        self.moveMax = self.columns - 1\r\n                    } else {\r\n                        var i = y + 1\r\n                        while (i < self.columns && self._paiSprites[x][i].getComponent('Pai').type != -1) {\r\n                            i++\r\n                        }\r\n                        self.moveEnd = i - 1\r\n                        while (i < self.columns && self._paiSprites[x][i].getComponent('Pai').type === -1) {\r\n                            i++\r\n                        }\r\n                        self.moveMax = i - 1\r\n                    }\r\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\r\n                        self._paiSprites[x][j].zIndex = 1000\r\n                    }\r\n                } else {\r\n                    self.moveDirection = 1\r\n                    if (x === 0) {\r\n                        self.moveStart = 0\r\n                        self.moveMin = 0\r\n                    } else {\r\n                        var i = x - 1\r\n                        while (i >= 0 && self._paiSprites[i][y].getComponent('Pai').type != -1) {\r\n                            i--\r\n                        }\r\n                        self.moveStart = i + 1\r\n                        while (i >= 0 && self._paiSprites[i][y].getComponent('Pai').type === -1) {\r\n                            i--\r\n                        }\r\n                        self.moveMin = i + 1\r\n                    }\r\n                    if (x === self.rows - 1) {\r\n                        self.moveEnd = self.rows - 1\r\n                    } else {\r\n                        var i = x + 1\r\n                        while (i < self.rows && self._paiSprites[i][y].getComponent('Pai').type != -1) {\r\n                            i++\r\n                        }\r\n                        self.moveEnd = i - 1\r\n                        while (i < self.rows && self._paiSprites[i][y].getComponent('Pai').type === -1) {\r\n                            i++\r\n                        }\r\n                        self.moveMax = i - 1\r\n                    }\r\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\r\n                        self._paiSprites[i][y].zIndex = 1000\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (self.moveDirection === 0) {\r\n                var row = self._lastPai.getComponent('Pai').x\r\n                if ((delta.x > 0 && self._paiSprites[row][self.moveEnd].x + delta.x <= self.moveMax * self.paiWidth - self.paddingLeft)\r\n                    || (delta.x < 0 && self._paiSprites[row][self.moveStart].x + delta.x >= self.moveMin * self.paiWidth - self.paddingLeft)) {\r\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\r\n                        self._paiSprites[row][j].x += delta.x\r\n                        self._paiSprites[row][j].zIndex = 1000\r\n                    }\r\n                }\r\n            } else {\r\n                var column = self._lastPai.getComponent('Pai').y\r\n                if ((delta.y > 0 && self._paiSprites[self.moveEnd][column].y + delta.y <= self.moveMax * self.paiHeight - self.paddingTop)\r\n                    || (delta.y < 0 && self._paiSprites[self.moveStart][column].y + delta.y >= self.moveMin * self.paiHeight - self.paddingTop)) {\r\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\r\n                        self._paiSprites[i][column].y += delta.y\r\n                        self._paiSprites[i][column].zIndex = 1000\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    onTouchEnd (event, self) {\r\n        cc.log('touchEnd: ')\r\n        self.mouseDown = false\r\n        if (self.moveDirection === 0) {\r\n            var row = self._lastPai.getComponent('Pai').x\r\n            var column = self._lastPai.getComponent('Pai').y\r\n            var currentX = Math.round((self._lastPai.x + this.paddingLeft) / self.paiWidth)\r\n            var delta = currentX - column\r\n            var matchFound = false\r\n            // cc.log('column: ' + column)\r\n            // cc.log('currentX: ' + currentX)\r\n            // cc.log('delta: '  + delta)\r\n            if (delta > 0) {\r\n                for (var j = self.moveStart; j <= self.moveEnd + delta; j++) {\r\n                    if (j < self.moveStart + delta && row != self.rows - 1 && row != 0) {\r\n                        var highX = row + 1\r\n                        while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\r\n                            highX++\r\n                        }\r\n                        var lowX = row - 1\r\n                        while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\r\n                            lowX--\r\n                        }\r\n                        //cc.log('lowX: ' + lowX)\r\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\r\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\r\n                        if (lowX >= 0 && highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === self._paiSprites[lowX][j].getComponent('Pai').type\r\n                            && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\r\n                            matchFound = true\r\n                            break\r\n                        }\r\n                    }\r\n                    if (j >= self.moveStart + delta) {\r\n                        if (row != self.rows - 1) {\r\n                            var highX = row + 1\r\n                            while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\r\n                                highX++\r\n                            }\r\n                            //cc.log('highX: ' + highX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\r\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\r\n                            if (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type == self._paiSprites[row][j - delta].getComponent('Pai').type\r\n                                && self._paiSprites[highX][j].getComponent('Pai').type != -1) {\r\n                                    matchFound = true\r\n                                    break\r\n                            }\r\n                        }\r\n                        if (row != 0) {\r\n                            var lowX = row - 1\r\n                            while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\r\n                                lowX--\r\n                            }\r\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j)\r\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\r\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\r\n                            if (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === self._paiSprites[row][j - delta].getComponent('Pai').type\r\n                                && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\r\n                                matchFound = true\r\n                                break\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                cc.log(\"matchFound: \" + matchFound)\r\n                if (matchFound) {\r\n                    for (var j = self.moveEnd; j >= self.moveStart; j--) {\r\n                        //cc.log(\"x: \" + row + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\r\n                        var type = self._paiSprites[row][j].getComponent('Pai').type\r\n                        self._paiSprites[row][j + delta].getComponent('Pai').type = type\r\n                        self._paiSprites[row][j + delta].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[type]\r\n                        self._paiSprites[row][j + delta].index = self._paiSprites[row][j].index\r\n                        self._paiSprites[row][j + delta].width = self.paiWidth\r\n                        self._paiSprites[row][j + delta].height = self.paiHeight\r\n                        self._pais[self._paiSprites[row][j].index] = cc.v2(row, j + delta)\r\n                        if (j < self.moveStart + delta) {\r\n                            self._paiSprites[row][j].getComponent('Pai').type = -1\r\n                            self._paiSprites[row][j].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\r\n                        }\r\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\r\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\r\n                        self._paiSprites[row][j].zIndex = 0\r\n                        self._paiSprites[row][j].width = self.paiWidth\r\n                        self._paiSprites[row][j].height = self.paiHeight\r\n                    }\r\n                    self._lastPai.color = cc.Color.WHITE\r\n                    self._lastPai = self._paiSprites[row][currentX]\r\n                    self._lastPai.color = cc.Color.GRAY\r\n                    if (self.coward) {\r\n                        for (var i = 0; i < 4; i++) {\r\n                            var index = self._pais[self._lastPai.getComponent('Pai').type * 4 + i]\r\n                            if (index != null) {\r\n                                self._paiSprites[index.x][index.y].color = cc.Color.GRAY\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\r\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\r\n                        self._paiSprites[row][j].zIndex = 0\r\n                    }\r\n                }\r\n            } else if (delta < 0) {\r\n                for (var j = self.moveStart + delta; j <= self.moveEnd; j++) {\r\n                    if (j > self.moveEnd + delta && row != self.rows - 1 && row != 0) {\r\n                        var highX = row + 1\r\n                        while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\r\n                            highX++\r\n                        }\r\n                        var lowX = row - 1\r\n                        while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\r\n                            lowX--\r\n                        }\r\n                        //cc.log('lowX: ' + lowX)\r\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\r\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\r\n                        if (highX < self.rows && lowX >= 0 && self._paiSprites[highX][j].getComponent('Pai').type === self._paiSprites[lowX][j].getComponent('Pai').type\r\n                            && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\r\n                            matchFound = true\r\n                            break\r\n                        }\r\n                    }\r\n                    if (j <= self.moveEnd + delta) {\r\n                        if (row != self.rows - 1) {\r\n                            var highX = row + 1\r\n                            \r\n                            while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\r\n                                cc.log(highX.toString() + \", \" + j);\r\n                                highX++\r\n                            }\r\n                            //cc.log('highX: ' + highX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\r\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\r\n                            if (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type == self._paiSprites[row][j - delta].getComponent('Pai').type\r\n                                && self._paiSprites[highX][j].getComponent('Pai').type != -1) {\r\n                                    matchFound = true\r\n                                    break\r\n                            }\r\n                        }\r\n                        if (row != 0) {\r\n                            var lowX = row - 1\r\n                            while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\r\n                                lowX--\r\n                            }\r\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j)\r\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\r\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\r\n                            if (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === self._paiSprites[row][j - delta].getComponent('Pai').type\r\n                                && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\r\n                                matchFound = true\r\n                                break\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                cc.log(\"matchFound: \" + matchFound)\r\n                if (matchFound) {\r\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\r\n                        //cc.log(\"x: \" + row + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\r\n                        var type = self._paiSprites[row][j].getComponent('Pai').type\r\n                        self._paiSprites[row][j + delta].getComponent('Pai').type = type\r\n                        self._paiSprites[row][j + delta].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[type]\r\n                        self._paiSprites[row][j + delta].index = self._paiSprites[row][j].index\r\n                        self._paiSprites[row][j + delta].width = self.paiWidth\r\n                        self._paiSprites[row][j + delta].height = self.paiHeight\r\n                        self._pais[self._paiSprites[row][j].index] = cc.v2(row, j + delta)\r\n                        if (j > self.moveEnd + delta) {\r\n                            self._paiSprites[row][j].getComponent('Pai').type = -1\r\n                            self._paiSprites[row][j].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\r\n                        }\r\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\r\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\r\n                        self._paiSprites[row][j].zIndex = 0\r\n                        self._paiSprites[row][j].width = self.paiWidth\r\n                        self._paiSprites[row][j].height = self.paiHeight\r\n                    }\r\n                    self._lastPai.color = cc.Color.WHITE\r\n                    self._lastPai = self._paiSprites[row][currentX]\r\n                    self._lastPai.color = cc.Color.GRAY\r\n                    if (self.coward) {\r\n                        for (var i = 0; i < 4; i++) {\r\n                            var index = self._pais[self._lastPai.getComponent('Pai').type * 4 + i]\r\n                            if (index != null) {\r\n                                self._paiSprites[index.x][index.y].color = cc.Color.GRAY\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\r\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\r\n                        self._paiSprites[row][j].zIndex = 0\r\n                    }\r\n                }\r\n            } else {\r\n                for (var j = self.moveStart; j <= self.moveEnd; j++) {\r\n                    self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\r\n                    self._paiSprites[row][j].zIndex = 0\r\n                }\r\n            }\r\n        } else if (self.moveDirection === 1) {\r\n            var row = self._lastPai.getComponent('Pai').x\r\n            var column = self._lastPai.getComponent('Pai').y\r\n            var currentY = Math.round((self._lastPai.y + self.paddingTop) / self.paiHeight)\r\n            var delta = currentY - row\r\n            var matchFound = false\r\n            cc.log('row: ' + row)\r\n            cc.log('currentY: ' + currentY)\r\n            cc.log('delta: '  + delta)\r\n            if (delta > 0) {\r\n                for (var i = self.moveStart; i <= self.moveEnd + delta; i++) {\r\n                    if (i < self.moveStart + delta && column != self.columns - 1 && column != 0) {\r\n                        var highY = column + 1\r\n                        while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\r\n                            highY++\r\n                        }\r\n                        var lowY = column - 1\r\n                        while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\r\n                            lowY--\r\n                        }\r\n                        //cc.log('lowY: ' + lowY)\r\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\r\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\r\n                        if (lowY >= 0 && highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === self._paiSprites[i][lowY].getComponent('Pai').type\r\n                            && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\r\n                            matchFound = true\r\n                            break\r\n                        }\r\n                    }\r\n                    if (i >= self.moveStart + delta) {\r\n                        if (column != self.columns - 1) {\r\n                            var highY = column + 1\r\n                            while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\r\n                                highY++\r\n                            }\r\n                            //cc.log('highY: ' + highY + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\r\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\r\n                            if (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type == self._paiSprites[i - delta][column].getComponent('Pai').type\r\n                                && self._paiSprites[i][highY].getComponent('Pai').type != -1) {\r\n                                    matchFound = true\r\n                                    break\r\n                            }\r\n                        }\r\n                        if (column != 0) {\r\n                            var lowY = column - 1\r\n                            while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\r\n                                lowY--\r\n                            }\r\n                            //cc.log('lowY: ' + lowY)\r\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\r\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\r\n                            if (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === self._paiSprites[i - delta][column].getComponent('Pai').type\r\n                                && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\r\n                                matchFound = true\r\n                                break\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                cc.log(\"matchFound: \" + matchFound)\r\n                if (matchFound) {\r\n                    for (var i = self.moveEnd; i >= self.moveStart; i--) {\r\n                        //cc.log(\"x: \" + i + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\r\n                        var type = self._paiSprites[i][column].getComponent('Pai').type\r\n                        self._paiSprites[i + delta][column].getComponent('Pai').type = type\r\n                        self._paiSprites[i + delta][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[type]\r\n                        self._paiSprites[i + delta][column].index = self._paiSprites[i][column].index\r\n                        self._paiSprites[i + delta][column].width = self.paiWidth\r\n                        self._paiSprites[i + delta][column].height = self.paiHeight\r\n                        self._pais[self._paiSprites[i][column].index] = cc.v2(i + delta, column)\r\n                        if (i < self.moveStart + delta) {\r\n                            self._paiSprites[i][column].getComponent('Pai').type = -1\r\n                            self._paiSprites[i][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\r\n                        }\r\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\r\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\r\n                        self._paiSprites[i][column].zIndex = 0\r\n                        self._paiSprites[i][column].width = self.paiWidth\r\n                        self._paiSprites[i][column].height = self.paiHeight\r\n                    }\r\n                    self._lastPai.color = cc.Color.WHITE\r\n                    self._lastPai = self._paiSprites[currentY][column]\r\n                    self._lastPai.color = cc.Color.GRAY\r\n                    if (self.coward) {\r\n                        for (var i = 0; i < 4; i++) {\r\n                            var index = self._pais[self._lastPai.getComponent('Pai').type * 4 + i]\r\n                            if (index != null) {\r\n                                self._paiSprites[index.x][index.y].color = cc.Color.GRAY\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\r\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\r\n                        self._paiSprites[i][column].zIndex = 0\r\n                    }\r\n                }\r\n            } else if (delta < 0) {\r\n                for (var i = self.moveStart + delta; i <= self.moveEnd; i++) {\r\n                    if (i > self.moveEnd + delta && column != self.columns - 1 && column != 0) {\r\n                        var highY = column + 1\r\n                        while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\r\n                            highY++\r\n                        }\r\n                        var lowY = column - 1\r\n                        while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\r\n                            lowY--\r\n                        }\r\n                        cc.log('i: ' + i + \", highY: \" + highY)\r\n                        if (highY < self.columns) {\r\n                            cc.log(self._paiSprites[i][highY].getComponent('Pai').type)\r\n                        }\r\n                        cc.log('i: ' + i + \", lowY: \" + lowY)\r\n                        if (lowY >= 0) {\r\n                            cc.log(self._paiSprites[i][lowY].getComponent('Pai').type)\r\n                        }\r\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\r\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\r\n                        if (highY < self.columns && lowY >= 0 && self._paiSprites[i][highY].getComponent('Pai').type === self._paiSprites[i][lowY].getComponent('Pai').type\r\n                            && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\r\n                            matchFound = true\r\n                            break\r\n                        }\r\n                    }\r\n                    if (i <= self.moveEnd + delta) {\r\n                        if (column != self.columns - 1) {\r\n                            var highY = column + 1\r\n                            while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\r\n                                highY++\r\n                            }\r\n                            cc.log('i: ' + i + \", highY: \" + highY + \", type: \" + highY < self.columns ? self._paiSprites[i][highY].getComponent('Pai').type : -1)\r\n                            cc.log('i: ' + i + \", column: \" + column + \", delta\" + delta + \", type: \" + self._paiSprites[i - delta][column].getComponent('Pai').type)\r\n                            if (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type == self._paiSprites[i - delta][column].getComponent('Pai').type\r\n                                && self._paiSprites[i][highY].getComponent('Pai').type != -1) {\r\n                                    matchFound = true\r\n                                    break\r\n                            }\r\n                        }\r\n                        if (column != 0) {\r\n                            var lowY = column - 1\r\n                            while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\r\n                                lowY--\r\n                            }\r\n                            cc.log('i: ' + i + \", lowY: \" + lowY + \", type: \" + lowY >= 0 ? self._paiSprites[i][lowY].getComponent('Pai').type : -1)\r\n                            cc.log('i: ' + i + \", column: \" + column + \", delta\" + delta + \", type: \" + self._paiSprites[i - delta][column].getComponent('Pai').type)\r\n                            if (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === self._paiSprites[i - delta][column].getComponent('Pai').type\r\n                                && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\r\n                                matchFound = true\r\n                                break\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                cc.log(\"matchFound: \" + matchFound)\r\n                if (matchFound) {\r\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\r\n                        //cc.log(\"x: \" + row + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\r\n                        var type = self._paiSprites[i][column].getComponent('Pai').type\r\n                        self._paiSprites[i + delta][column].getComponent('Pai').type = type\r\n                        self._paiSprites[i + delta][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[type]\r\n                        self._paiSprites[i + delta][column].index = self._paiSprites[i][column].index\r\n                        self._paiSprites[i + delta][column].width = self.paiWidth\r\n                        self._paiSprites[i + delta][column].height = self.paiHeight\r\n                        self._pais[self._paiSprites[i][column].index] = cc.v2(i + delta, column)\r\n                        if (i > self.moveEnd + delta) {\r\n                            self._paiSprites[i][column].getComponent('Pai').type = -1\r\n                            self._paiSprites[i][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\r\n                        }\r\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\r\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\r\n                        self._paiSprites[i][column].zIndex = 0\r\n                        self._paiSprites[i][column].width = self.paiWidth\r\n                        self._paiSprites[i][column].height = self.paiHeight\r\n                    }\r\n                    self._lastPai.color = cc.Color.WHITE\r\n                    self._lastPai = self._paiSprites[currentY][column]\r\n                    self._lastPai.color = cc.Color.GRAY\r\n                    if (self.coward) {\r\n                        for (var i = 0; i < 4; i++) {\r\n                            var index = self._pais[self._lastPai.getComponent('Pai').type * 4 + i]\r\n                            if (index != null) {\r\n                                self._paiSprites[index.x][index.y].color = cc.Color.GRAY\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\r\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\r\n                        self._paiSprites[i][column].zIndex = 0\r\n                    }\r\n                }\r\n            } else {\r\n                for (var i = self.moveStart; i <= self.moveEnd; i++) {\r\n                    self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\r\n                    self._paiSprites[i][column].zIndex = 0\r\n                }\r\n            }\r\n        }\r\n        self.moveDirection = -1\r\n\r\n        this.diedGame();\r\n    },\r\n    switchPai(x1, y1, x2, y2) {\r\n        var tempType = this._paiSprites[x1][y1].getComponent('Pai').type;\r\n        var tempX = this._paiSprites[x1][y1].getComponent('Pai').x;\r\n        var tempY = this._paiSprites[x1][y1].getComponent('Pai').y;\r\n\r\n        var targetType = this._paiSprites[x2][y2].getComponent('Pai').type;\r\n        var targetX = this._paiSprites[x2][y2].getComponent('Pai').x;\r\n        var targetY = this._paiSprites[x2][y2].getComponent('Pai').y;\r\n\r\n        if (targetType < 0 || tempType < 0) {\r\n            return;\r\n        }\r\n\r\n        this._paiSprites[x1][y1].getComponent(cc.Sprite).spriteFrame = this.spriteFrames[targetType]\r\n        this._paiSprites[x1][y1].getComponent('Pai').type = targetType;\r\n        this._paiSprites[x1][y1].width = this.paiWidth;\r\n        this._paiSprites[x1][y1].height = this.paiHeight;\r\n\r\n\r\n        this._paiSprites[x2][y2].getComponent(cc.Sprite).spriteFrame = this.spriteFrames[tempType]\r\n        this._paiSprites[x2][y2].getComponent('Pai').type = tempType;\r\n        this._paiSprites[x2][y2].width = this.paiWidth;\r\n        this._paiSprites[x2][y2].height = this.paiHeight;\r\n\r\n    },\r\n    reshuffle() {\r\n        var indexes = [];\r\n        for (var i = 0; i < this.rows; i++) {\r\n            for (var j = 0; j < this.columns; j++) {\r\n                var pai = this._paiSprites[i][j].getComponent('Pai');\r\n                if (pai.type >= 0) {\r\n                    indexes.push({x:i,y:j});\r\n                }\r\n            }\r\n        }\r\n\r\n        var array = new Array(indexes.length);\r\n        var m = array.length, t, index;\r\n        for (var i = 0; i < m; i++) {\r\n            array[i] = i\r\n        }\r\n\r\n        while (m) {\r\n          index = Math.floor(Math.random() * m--);\r\n\r\n          // And swap it with the current element.\r\n          t = array[m];\r\n          array[m] = array[index];\r\n          array[index] = t;\r\n        }\r\n\r\n        for (var i = 0; i < array.length ; i++) {\r\n            var x1 = indexes[i].x;\r\n            var y1 = indexes[i].y;\r\n            var x2 = indexes[array[i]].x;\r\n            var y2 = indexes[array[i]].y;\r\n            this.switchPai(x1,y1,x2,y2);\r\n        }\r\n        \r\n    },\r\n    shuffle() {\r\n        var array = new Array(this.rows * this.columns)\r\n        var m = array.length, t, index;\r\n        for (var i = 0; i < this.rows * this.columns; i++) {\r\n            array[i] = i\r\n        }\r\n\r\n        // While there remain elements to shuffle\r\n        while (m) {\r\n          // Pick a remaining element\r\n          index = Math.floor(Math.random() * m--);\r\n\r\n          // And swap it with the current element.\r\n          t = array[m];\r\n          array[m] = array[index];\r\n          array[index] = t;\r\n        }\r\n\r\n        for (var i = 0; i < this.rows; i++) {\r\n            for (var j = 0; j < this.columns; j++) {\r\n                var index = i * this.columns + j\r\n                var type = Math.trunc(array[index] / 4)\r\n                this._paiSprites[i][j].getComponent(cc.Sprite).spriteFrame = this.spriteFrames[type]\r\n                this._paiSprites[i][j].getComponent('Pai').type = type\r\n                this._paiSprites[i][j].getComponent('Pai').x = i\r\n                this._paiSprites[i][j].getComponent('Pai').y = j\r\n                this._paiSprites[i][j].width = this.paiWidth\r\n                this._paiSprites[i][j].height = this.paiHeight\r\n                this._paiSprites[i][j].index = array[index]\r\n                cc.log(array[index] + \", \" + i + \", \" + j)\r\n                this._pais[array[index]] = cc.v2(i, j)\r\n            }\r\n        }\r\n    },\r\n\r\n    winSplash () {\r\n        var init = cc.moveTo(0, cc.v2(Math.random() * this.paiWidth * this.columns - this.paddingLeft, this.paiHeight * this.rows / 2))\r\n        var start = cc.moveBy(Math.random() / 2, cc.v2(0, -this.paiHeight)).easing(cc.easeCubicActionOut());\r\n        var scaleUp = cc.scaleTo(Math.random() / 2, 0.8, 0.8)\r\n        var move = cc.moveBy(Math.random() * 3, cc.v2(0, -this.paiHeight * (this.rows - 2))).easing(cc.easeCubicActionOut());\r\n        var scaleDown = cc.scaleTo(Math.random() / 2, 0.5, 0.5)\r\n        var end = cc.moveBy(Math.random() / 2, cc.v2(0, -this.paiHeight))\r\n        return cc.repeatForever(cc.sequence(init, start, scaleUp, move, scaleDown, end))\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}