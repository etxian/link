{"version":3,"sources":["../../../../assets/scripts/assets/scripts/game.js"],"names":["cc","Class","extends","Component","properties","paiPrefab","default","type","Prefab","spriteFrames","SpriteFrame","tutorial","Node","startButton","Button","_paiSprites","_pais","rows","columns","paiWidth","paiHeight","paddingLeft","paddingTop","_lastPai","lastX","lastY","moveDirection","moveStart","moveEnd","moveMin","moveMax","originalX","originalY","mouseDown","count","onLoad","onDestroy","pais","i","j","getComponent","sys","localStorage","setItem","log","onGameStart","active","enabled","Array","self","newNode","instantiate","Sprite","spriteFrame","Math","trunc","node","addChild","setPosition","v2","on","EventType","TOUCH_END","event","onTouchEnd","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","paisStorage","getItem","split","shuffle","row","x","column","y","zIndex","currentPai","floor","getLocationY","getLocationX","color","Color","WHITE","currentX","currentY","match","lowX","min","lowY","highX","max","highY","width","height","random","runAction","winSplash","GRAY","delta","getDelta","location","getLocation","abs","round","matchFound","array","m","length","t","index","init","moveTo","start","moveBy","easing","easeCubicActionOut","scaleUp","scaleTo","move","scaleDown","end","repeatForever","sequence"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAW;AACPC,qBAAS,IADF;AAEPC,kBAAMP,GAAGQ;AAFF,SADH;;AAMRC,sBAAc;AACVH,qBAAS,EADC;AAEVC,kBAAM,CAACP,GAAGU,WAAJ;AAFI,SANN;;AAWRC,kBAAU;AACNL,qBAAS,IADH;AAENC,kBAAMP,GAAGY;AAFH,SAXF;;AAgBRC,qBAAa;AACTP,qBAAS,IADA;AAETC,kBAAMP,GAAGc;AAFA,SAhBL;AAoBRC,qBAAa;AACTT,qBAAS,EADA;AAETC,kBAAM,CAACP,GAAGY,IAAJ;AAFG,SApBL;;AAyBRI,eAAO,IAzBC;;AA2BRC,cAAM,CA3BE;AA4BRC,iBAAS,EA5BD;;AA8BRC,kBAAU,EA9BF;AA+BRC,mBAAW,EA/BH;;AAiCRC,qBAAa,GAjCL;AAkCRC,oBAAY,GAlCJ;;AAoCRC,kBAAU,IApCF;AAqCRC,eAAO,CArCC;AAsCRC,eAAO,CAtCC;;AAwCRC,uBAAe,CAAC,CAxCR;AAyCRC,mBAAW,CAzCH;AA0CRC,iBAAS,CA1CD;AA2CRC,iBAAS,CA3CD;AA4CRC,iBAAS,CA5CD;AA6CRC,mBAAW,CA7CH;AA8CRC,mBAAW,CA9CH;;AAgDRC,mBAAW,KAhDH;AAiDRC,eAAO;AAjDC,KAHP;;AAuDL;;AAEAC,UAzDK,oBAyDK,CAAE,CAzDP;AA2DLC,aA3DK,uBA2DQ;AACT,YAAIC,OAAO,EAAX;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,IAAzB,EAA+BqB,GAA/B,EAAoC;AAChC,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,OAAzB,EAAkCqB,GAAlC,EAAuC;AACnCF,wBAAQ,KAAKtB,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,EAAuBC,YAAvB,CAAoC,KAApC,EAA2CjC,IAA3C,GAAkD,GAA1D;AACH;AACJ;AACDP,WAAGyC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,EAAoCN,IAApC;AACArC,WAAG4C,GAAH,CAAO,YAAP;AACH,KApEI;AAsELC,eAtEK,yBAsEU;AACX,aAAKlC,QAAL,CAAcmC,MAAd,GAAuB,KAAvB;AACA,aAAKjC,WAAL,CAAiBiC,MAAjB,GAA0B,KAA1B;AACA,aAAKjC,WAAL,CAAiBkC,OAAjB,GAA2B,KAA3B;AACA,aAAK/B,KAAL,GAAa,IAAIgC,KAAJ,EAAb;AACA,aAAKjC,WAAL,GAAmB,IAAIiC,KAAJ,EAAnB;AACA,aAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,IAAzB,EAA+BqB,GAA/B,EAAoC;AAChC,iBAAKtB,KAAL,CAAWsB,CAAX,IAAgB,IAAIU,KAAJ,CAAUV,CAAV,CAAhB;AACA,iBAAKvB,WAAL,CAAiBuB,CAAjB,IAAsB,IAAIU,KAAJ,CAAUV,CAAV,CAAtB;AACA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,OAAzB,EAAkCqB,GAAlC,EAAuC;AACnC,qBAAKvB,KAAL,CAAWsB,CAAX,EAAcC,CAAd,IAAmB,CAAC,CAApB;AACA,qBAAKxB,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,IAAyB,IAAzB;AACH;AACJ;;AAED,YAAIU,OAAO,IAAX;AACA,aAAK,IAAIX,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,IAAzB,EAA+BqB,GAA/B,EAAoC;AAChC,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,OAAzB,EAAkCqB,GAAlC,EAAuC;AACnC,oBAAIW,UAAUlD,GAAGmD,WAAH,CAAe,KAAK9C,SAApB,CAAd;AACA6C,wBAAQV,YAAR,CAAqBxC,GAAGoD,MAAxB,EAAgCC,WAAhC,GAA8C,KAAK5C,YAAL,CAAkB6C,KAAKC,KAAL,CAAW,CAACjB,IAAI,KAAKrB,IAAT,GAAgBsB,CAAjB,IAAsB,CAAjC,CAAlB,CAA9C;AACA,qBAAKxB,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,IAAyBW,OAAzB;AACA,qBAAKM,IAAL,CAAUC,QAAV,CAAmBP,OAAnB;AACAA,wBAAQQ,WAAR,CAAoB1D,GAAG2D,EAAH,CAAM,KAAKxC,QAAL,GAAgBoB,CAAhB,GAAoB,KAAKlB,WAA/B,EAA4C,KAAKD,SAAL,GAAiBkB,CAAjB,GAAqB,KAAKhB,UAAtE,CAApB;AACH;AACJ;AACD,aAAKkC,IAAL,CAAUI,EAAV,CAAa5D,GAAGY,IAAH,CAAQiD,SAAR,CAAkBC,SAA/B,EAA0C,UAASC,KAAT,EAAgB;AACtD,iBAAKC,UAAL,CAAgBD,KAAhB,EAAuBd,IAAvB;AACH,SAFD,EAEG,IAFH;AAGA,aAAKO,IAAL,CAAUI,EAAV,CAAa5D,GAAGY,IAAH,CAAQiD,SAAR,CAAkBI,WAA/B,EAA4C,UAASF,KAAT,EAAgB;AACxD,iBAAKG,YAAL,CAAkBH,KAAlB,EAAyBd,IAAzB;AACH,SAFD,EAEG,IAFH;AAGA,aAAKO,IAAL,CAAUI,EAAV,CAAa5D,GAAGY,IAAH,CAAQiD,SAAR,CAAkBM,UAA/B,EAA2C,UAASJ,KAAT,EAAgB;AACvD,iBAAKK,WAAL,CAAiBL,KAAjB,EAAwBd,IAAxB;AACH,SAFD,EAEG,IAFH;;AAIA,YAAIoB,cAAcrE,GAAGyC,GAAH,CAAOC,YAAP,CAAoB4B,OAApB,CAA4B,MAA5B,CAAlB;AACA,YAAID,eAAe,IAAnB,EAAyB;AACrB,gBAAIhC,OAAOgC,YAAYE,KAAZ,CAAkB,GAAlB,CAAX;AACA,iBAAK,IAAIjC,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,IAAzB,EAA+BqB,GAA/B,EAAoC;AAChC,qBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,OAAzB,EAAkCqB,GAAlC,EAAuC;AACnC,yBAAKxB,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,EAAuBC,YAAvB,CAAoCxC,GAAGoD,MAAvC,EAA+CC,WAA/C,GAA6D,KAAK5C,YAAL,CAAkB4B,KAAKC,IAAIpB,OAAJ,GAAcqB,CAAnB,KAAyB,CAAC,CAA1B,GAA8B,EAA9B,GAAmCF,KAAKC,IAAIpB,OAAJ,GAAcqB,CAAnB,CAArD,CAA7D;AACA,yBAAKxB,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,EAAuBC,YAAvB,CAAoC,KAApC,EAA2CjC,IAA3C,GAAkD8B,KAAKC,IAAIpB,OAAJ,GAAcqB,CAAnB,CAAlD;AACH;AACJ;AACJ,SARD,MAQO;AACH,iBAAKiC,OAAL;AACH;AACJ,KArHI;AAuHLN,gBAvHK,wBAuHSH,KAvHT,EAuHgBd,IAvHhB,EAuHsB;AACvB,YAAIA,KAAKhB,SAAL,KAAmB,IAAnB,IAA2BgB,KAAK1B,QAAL,IAAiB,IAAhD,EAAsD;AAClD,gBAAIkD,MAAMxB,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCkC,CAA5C;AACA,gBAAIC,SAAS1B,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCoC,CAA/C;AACA,gBAAI3B,KAAKvB,aAAL,KAAuB,CAA3B,EAA8B;AAC1B,qBAAK,IAAIa,IAAIU,KAAKtB,SAAlB,EAA6BY,KAAKU,KAAKrB,OAAvC,EAAgDW,GAAhD,EAAqD;AACjDU,yBAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBmC,CAAzB,GAA6BzB,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CoC,CAA7C,GAAiD3B,KAAK9B,QAAtD,GAAiE8B,KAAK5B,WAAnG;AACA4B,yBAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBsC,MAAzB,GAAkC,CAAlC;AACH;AACJ,aALD,MAKO,IAAI5B,KAAKvB,aAAL,KAAuB,CAA3B,EAA8B;AACjC,qBAAK,IAAIY,IAAIW,KAAKtB,SAAlB,EAA6BW,KAAKW,KAAKrB,OAAvC,EAAgDU,GAAhD,EAAqD;AACjDW,yBAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BC,CAA5B,GAAgC3B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDkC,CAAhD,GAAoDzB,KAAK7B,SAAzD,GAAqE6B,KAAK3B,UAA1G;AACA2B,yBAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BE,MAA5B,GAAqC,CAArC;AACH;AACJ;AACJ;AACD5B,aAAKhB,SAAL,GAAiB,IAAjB;AACA,YAAI6C,aAAa7B,KAAKlC,WAAL,CAAiBuC,KAAKyB,KAAL,CAAWhB,MAAMiB,YAAN,KAAuB,KAAK5D,SAAvC,CAAjB,EAAoEkC,KAAKyB,KAAL,CAAWhB,MAAMkB,YAAN,KAAuB,KAAK9D,QAAvC,CAApE,CAAjB;AACA,YAAI8B,KAAK1B,QAAL,IAAiB,IAArB,EAA2B;AACvB0B,iBAAK1B,QAAL,CAAc2D,KAAd,GAAsBlF,GAAGmF,KAAH,CAASC,KAA/B;AACA,gBAAIN,WAAWtC,YAAX,CAAwB,KAAxB,EAA+BjC,IAA/B,KAAwC0C,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCjC,IAA1E,IAAkFuE,cAAc7B,KAAK1B,QAAzG,EAAmH;AAC/G,oBAAI8D,WAAWP,WAAWtC,YAAX,CAAwB,KAAxB,EAA+BkC,CAA9C;AACA,oBAAIY,WAAWR,WAAWtC,YAAX,CAAwB,KAAxB,EAA+BoC,CAA9C;AACA,oBAAIpD,QAAQyB,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCkC,CAA9C;AACA,oBAAIjD,QAAQwB,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCoC,CAA9C;;AAEA5E,mBAAG4C,GAAH,CAAO,cAAcyC,QAAd,GAAyB,GAAzB,GAA+BC,QAAtC;AACAtF,mBAAG4C,GAAH,CAAO,WAAWpB,KAAX,GAAmB,GAAnB,GAAyBC,KAAhC;AACA,oBAAI8D,QAAQ,IAAZ;AACA,oBAAIC,OAAOlC,KAAKmC,GAAL,CAASJ,QAAT,EAAmB7D,KAAnB,CAAX;AACA,oBAAIkE,OAAOpC,KAAKmC,GAAL,CAASH,QAAT,EAAmB7D,KAAnB,CAAX;AACA,oBAAIkE,QAAQrC,KAAKsC,GAAL,CAASP,QAAT,EAAmB7D,KAAnB,CAAZ;AACA,oBAAIqE,QAAQvC,KAAKsC,GAAL,CAASN,QAAT,EAAmB7D,KAAnB,CAAZ;;AAEA,oBAAK4D,WAAW7D,KAAX,IAAoB8D,WAAW7D,KAAhC,IAA2C4D,YAAY7D,KAAZ,IAAqB8D,YAAY7D,KAAhF,EAAwF;AACpFzB,uBAAG4C,GAAH,CAAO,GAAP;AACA,yBAAK,IAAIN,IAAIkD,OAAO,CAApB,EAAuBlD,KAAKqD,KAA5B,EAAmCrD,GAAnC,EAAwC;AACpCtC,2BAAG4C,GAAH,CAAO,SAASN,CAAT,GAAa,GAAb,GAAmBoD,IAAnB,GAA0B,GAA1B,GAAgCzC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAArF;AACA,4BAAI+B,KAAKqD,KAAL,IAAc1C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAAzE,EAA4E;AACxEgF,oCAAQ,KAAR;AACA;AACH;AACJ;;AAED,wBAAIA,KAAJ,EAAW;AACP,6BAAK,IAAIhD,IAAImD,IAAb,EAAmBnD,IAAIsD,KAAvB,EAA8BtD,GAA9B,EAAmC;AAC/BvC,+BAAG4C,GAAH,CAAO,SAAS+C,KAAT,GAAiB,GAAjB,GAAuBpD,CAAvB,GAA2B,GAA3B,GAAiCU,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAAvF;AACA,gCAAI0C,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD,CAAC,CAA5D,EAA+D;AAC3DgF,wCAAQ,KAAR;AACA;AACH;AACJ;AACJ;;AAED,wBAAI,CAACA,KAAL,EAAY;AACRA,gCAAQ,IAAR;AACA,6BAAK,IAAIhD,IAAImD,OAAO,CAApB,EAAuBnD,KAAKsD,KAA5B,EAAmCtD,GAAnC,EAAwC;AACpCvC,+BAAG4C,GAAH,CAAO,SAAS4C,IAAT,GAAgB,GAAhB,GAAsBjD,CAAtB,GAA0B,GAA1B,GAAgCU,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAArF;AACA,gCAAIgC,KAAKsD,KAAL,IAAc5C,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAAzE,EAA4E;AACxEgF,wCAAQ,KAAR;AACA;AACH;AACJ;;AAED,4BAAIA,KAAJ,EAAW;AACP,iCAAK,IAAIjD,IAAIkD,IAAb,EAAmBlD,IAAIqD,KAAvB,EAA8BrD,GAA9B,EAAmC;AAC/BtC,mCAAG4C,GAAH,CAAO,SAASN,CAAT,GAAa,GAAb,GAAmBuD,KAAnB,GAA2B,GAA3B,GAAiC5C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAAvF;AACA,oCAAI0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD,CAAC,CAA5D,EAA+D;AAC3DgF,4CAAQ,KAAR;AACA;AACH;AACJ;AACJ;AACJ;AACJ,iBAxCD,MAwCO,IAAKF,YAAY7D,KAAZ,IAAqB8D,WAAW7D,KAAjC,IAA4C4D,WAAW7D,KAAX,IAAoB8D,YAAY7D,KAAhF,EAAwF;AAC3FzB,uBAAG4C,GAAH,CAAO,GAAP;AACA,yBAAK,IAAIN,IAAIkD,OAAO,CAApB,EAAuBlD,KAAKqD,KAA5B,EAAmCrD,GAAnC,EAAwC;AACpCtC,2BAAG4C,GAAH,CAAO,SAASN,CAAT,GAAa,GAAb,GAAmBuD,KAAnB,GAA2B,GAA3B,GAAiC5C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAAvF;AACA,4BAAI+B,KAAKqD,KAAL,IAAc1C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD,CAAC,CAA1E,EAA6E;AACzEgF,oCAAQ,KAAR;AACA;AACH;AACJ;;AAED,wBAAIA,KAAJ,EAAW;AACP,6BAAK,IAAIhD,IAAIsD,KAAb,EAAoBtD,IAAImD,IAAxB,EAA8BnD,GAA9B,EAAmC;AAC/BvC,+BAAG4C,GAAH,CAAO,SAAS+C,KAAT,GAAiB,GAAjB,GAAuBpD,CAAvB,GAA2B,GAA3B,GAAiCU,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAAvF;AACA,gCAAI0C,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD,CAAC,CAA5D,EAA+D;AAC3DgF,wCAAQ,KAAR;AACA;AACH;AACJ;AACJ;;AAED,wBAAI,CAACA,KAAL,EAAY;AACRA,gCAAQ,IAAR;AACA,6BAAK,IAAIhD,IAAIsD,QAAQ,CAArB,EAAwBtD,KAAKmD,IAA7B,EAAmCnD,GAAnC,EAAwC;AACpCvC,+BAAG4C,GAAH,CAAO,SAAS4C,IAAT,GAAgB,GAAhB,GAAsBjD,CAAtB,GAA0B,GAA1B,GAAgCU,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAArF;AACA,gCAAIgC,KAAKmD,IAAL,IAAazC,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAAxE,EAA2E;AACvEgF,wCAAQ,KAAR;AACA;AACH;AACJ;;AAED,4BAAIA,KAAJ,EAAW;AACP,iCAAK,IAAIjD,IAAIkD,IAAb,EAAmBlD,IAAIqD,KAAvB,EAA8BrD,GAA9B,EAAmC;AAC/BtC,mCAAG4C,GAAH,CAAO,SAASN,CAAT,GAAa,GAAb,GAAmBoD,IAAnB,GAA0B,GAA1B,GAAgCzC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAArF;AACA,oCAAI0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAA3D,EAA8D;AAC1DgF,4CAAQ,KAAR;AACA;AACH;AACJ;AACJ;AACJ;AACJ;AACD,oBAAIA,KAAJ,EAAW;AACPT,+BAAWtC,YAAX,CAAwBxC,GAAGoD,MAA3B,EAAmCC,WAAnC,GAAiDJ,KAAKxC,YAAL,CAAkB,EAAlB,CAAjD;AACAqE,+BAAWgB,KAAX,GAAmB,KAAK3E,QAAxB;AACA2D,+BAAWiB,MAAX,GAAoB,KAAK3E,SAAzB;AACA6B,yBAAK1B,QAAL,CAAciB,YAAd,CAA2BxC,GAAGoD,MAA9B,EAAsCC,WAAtC,GAAoDJ,KAAKxC,YAAL,CAAkB,EAAlB,CAApD;AACAwC,yBAAK1B,QAAL,CAAcuE,KAAd,GAAsB,KAAK3E,QAA3B;AACA8B,yBAAK1B,QAAL,CAAcwE,MAAd,GAAuB,KAAK3E,SAA5B;AACA0D,+BAAWtC,YAAX,CAAwB,KAAxB,EAA+BjC,IAA/B,GAAsC,CAAC,CAAvC;AACA0C,yBAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCjC,IAAlC,GAAyC,CAAC,CAA1C;AACAuE,+BAAWI,KAAX,GAAmBlF,GAAGmF,KAAH,CAASC,KAA5B;AACAnC,yBAAKf,KAAL,IAAc,CAAd;AACA,wBAAIe,KAAKf,KAAL,IAAce,KAAKhC,IAAL,GAAYgC,KAAK/B,OAAnC,EAA4C;AACxC,6BAAK,IAAIoB,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,IAAzB,EAA+BqB,GAA/B,EAAoC;AAChC,iCAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,OAAzB,EAAkCqB,GAAlC,EAAuC;AACnCU,qCAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,EAAuBC,YAAvB,CAAoCxC,GAAGoD,MAAvC,EAA+CC,WAA/C,GAA6D,KAAK5C,YAAL,CAAkB6C,KAAKC,KAAL,CAAWD,KAAK0C,MAAL,KAAgB,EAA3B,CAAlB,CAA7D;AACA/C,qCAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,EAAuB0D,SAAvB,CAAiChD,KAAKiD,SAAL,EAAjC;AACH;AACJ;AACJ;AACJ;AACJ;AACJ;AACDpB,mBAAWI,KAAX,GAAmBlF,GAAGmF,KAAH,CAASgB,IAA5B;AACAlD,aAAK1B,QAAL,GAAgBuD,UAAhB;AACA7B,aAAKlB,SAAL,GAAiB+C,WAAWtC,YAAX,CAAwB,KAAxB,EAA+BkC,CAAhD;AACAzB,aAAKjB,SAAL,GAAiB8C,WAAWtC,YAAX,CAAwB,KAAxB,EAA+BoC,CAAhD;AACH,KApQI;AAsQLR,eAtQK,uBAsQQL,KAtQR,EAsQed,IAtQf,EAsQqB;AACtB,YAAImD,QAAQrC,MAAMsC,QAAN,EAAZ;AACA,YAAIC,WAAWvC,MAAMwC,WAAN,EAAf;AACA,YAAItD,KAAK1B,QAAL,IAAiB,IAArB,EAA2B;AACvB,gBAAImD,IAAIzB,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCkC,CAA1C;AACA,gBAAIE,IAAI3B,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCoC,CAA1C;AACA,gBAAI3B,KAAKvB,aAAL,KAAuB,CAAC,CAA5B,EAA+B;AAC3B,oBAAI4B,KAAKkD,GAAL,CAASJ,MAAM1B,CAAf,IAAoBpB,KAAKkD,GAAL,CAASJ,MAAMxB,CAAf,CAAxB,EAA2C;AACvC3B,yBAAKvB,aAAL,GAAqB,CAArB;AACA,wBAAIkD,MAAM,CAAV,EAAa;AACT3B,6BAAKtB,SAAL,GAAiB,CAAjB;AACAsB,6BAAKpB,OAAL,GAAe,CAAf;AACH,qBAHD,MAGO;AACH,4BAAIS,IAAIsC,IAAI,CAAZ;AACA,+BAAOtC,KAAK,CAAL,IAAUW,KAAKlC,WAAL,CAAiB2D,CAAjB,EAAoBpC,CAApB,EAAuBE,YAAvB,CAAoC,KAApC,EAA2CjC,IAA3C,IAAmD,CAAC,CAArE,EAAwE;AACpE+B;AACH;AACDW,6BAAKtB,SAAL,GAAiBW,IAAI,CAArB;AACA,+BAAOA,KAAK,CAAL,IAAUW,KAAKlC,WAAL,CAAiB2D,CAAjB,EAAoBpC,CAApB,EAAuBE,YAAvB,CAAoC,KAApC,EAA2CjC,IAA3C,KAAoD,CAAC,CAAtE,EAAyE;AACrE+B;AACH;AACDW,6BAAKpB,OAAL,GAAeS,IAAI,CAAnB;AACH;AACD,wBAAIsC,MAAM3B,KAAK/B,OAAL,GAAe,CAAzB,EAA4B;AACxB+B,6BAAKrB,OAAL,GAAeqB,KAAK/B,OAAL,GAAe,CAA9B;AACA+B,6BAAKnB,OAAL,GAAemB,KAAK/B,OAAL,GAAe,CAA9B;AACH,qBAHD,MAGO;AACH,4BAAIoB,IAAIsC,IAAI,CAAZ;AACA,+BAAOtC,IAAIW,KAAK/B,OAAT,IAAoB+B,KAAKlC,WAAL,CAAiB2D,CAAjB,EAAoBpC,CAApB,EAAuBE,YAAvB,CAAoC,KAApC,EAA2CjC,IAA3C,IAAmD,CAAC,CAA/E,EAAkF;AAC9E+B;AACH;AACDW,6BAAKrB,OAAL,GAAeU,IAAI,CAAnB;AACA,+BAAOA,IAAIW,KAAK/B,OAAT,IAAoB+B,KAAKlC,WAAL,CAAiB2D,CAAjB,EAAoBpC,CAApB,EAAuBE,YAAvB,CAAoC,KAApC,EAA2CjC,IAA3C,KAAoD,CAAC,CAAhF,EAAmF;AAC/E+B;AACH;AACDW,6BAAKnB,OAAL,GAAeQ,IAAI,CAAnB;AACH;AACD,yBAAK,IAAIC,IAAIU,KAAKtB,SAAlB,EAA6BY,KAAKU,KAAKrB,OAAvC,EAAgDW,GAAhD,EAAqD;AACjDU,6BAAKlC,WAAL,CAAiB2D,CAAjB,EAAoBnC,CAApB,EAAuBsC,MAAvB,GAAgC,IAAhC;AACH;AACJ,iBAjCD,MAiCO;AACH5B,yBAAKvB,aAAL,GAAqB,CAArB;AACA,wBAAIgD,MAAM,CAAV,EAAa;AACTzB,6BAAKtB,SAAL,GAAiB,CAAjB;AACAsB,6BAAKpB,OAAL,GAAe,CAAf;AACH,qBAHD,MAGO;AACH,4BAAIS,IAAIoC,IAAI,CAAZ;AACA,+BAAOpC,KAAK,CAAL,IAAUW,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBsC,CAApB,EAAuBpC,YAAvB,CAAoC,KAApC,EAA2CjC,IAA3C,IAAmD,CAAC,CAArE,EAAwE;AACpE+B;AACH;AACDW,6BAAKtB,SAAL,GAAiBW,IAAI,CAArB;AACA,+BAAOA,KAAK,CAAL,IAAUW,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBsC,CAApB,EAAuBpC,YAAvB,CAAoC,KAApC,EAA2CjC,IAA3C,KAAoD,CAAC,CAAtE,EAAyE;AACrE+B;AACH;AACDW,6BAAKpB,OAAL,GAAeS,IAAI,CAAnB;AACH;AACD,wBAAIoC,MAAMzB,KAAKhC,IAAL,GAAY,CAAtB,EAAyB;AACrBgC,6BAAKrB,OAAL,GAAeqB,KAAKhC,IAAL,GAAY,CAA3B;AACH,qBAFD,MAEO;AACH,4BAAIqB,IAAIoC,IAAI,CAAZ;AACA,+BAAOpC,IAAIW,KAAKhC,IAAT,IAAiBgC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBsC,CAApB,EAAuBpC,YAAvB,CAAoC,KAApC,EAA2CjC,IAA3C,IAAmD,CAAC,CAA5E,EAA+E;AAC3E+B;AACH;AACDW,6BAAKrB,OAAL,GAAeU,IAAI,CAAnB;AACA,+BAAOA,IAAIW,KAAKhC,IAAT,IAAiBgC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBsC,CAApB,EAAuBpC,YAAvB,CAAoC,KAApC,EAA2CjC,IAA3C,KAAoD,CAAC,CAA7E,EAAgF;AAC5E+B;AACH;AACDW,6BAAKnB,OAAL,GAAeQ,IAAI,CAAnB;AACH;AACD,yBAAK,IAAIA,IAAIW,KAAKtB,SAAlB,EAA6BW,KAAKW,KAAKrB,OAAvC,EAAgDU,GAAhD,EAAqD;AACjDW,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBsC,CAApB,EAAuBC,MAAvB,GAAgC,IAAhC;AACH;AACJ;AACJ;;AAED,gBAAI5B,KAAKvB,aAAL,KAAuB,CAA3B,EAA8B;AAC1B,oBAAI+C,MAAMxB,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCkC,CAA5C;AACA,oBAAK0B,MAAM1B,CAAN,GAAU,CAAV,IAAezB,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBxB,KAAKrB,OAA3B,EAAoC8C,CAApC,GAAwC0B,MAAM1B,CAA9C,IAAmDzB,KAAKnB,OAAL,GAAemB,KAAK9B,QAApB,GAA+B8B,KAAK5B,WAAvG,IACI+E,MAAM1B,CAAN,GAAU,CAAV,IAAezB,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBxB,KAAKtB,SAA3B,EAAsC+C,CAAtC,GAA0C0B,MAAM1B,CAAhD,IAAqDzB,KAAKpB,OAAL,GAAeoB,KAAK9B,QAApB,GAA+B8B,KAAK5B,WADhH,EAC8H;AAC1H,yBAAK,IAAIkB,IAAIU,KAAKtB,SAAlB,EAA6BY,KAAKU,KAAKrB,OAAvC,EAAgDW,GAAhD,EAAqD;AACjDU,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBmC,CAAzB,IAA8B0B,MAAM1B,CAApC;AACAzB,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBsC,MAAzB,GAAkC,IAAlC;AACH;AACJ;AACJ,aATD,MASO;AACH,oBAAIF,SAAS1B,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCoC,CAA/C;AACA,oBAAKwB,MAAMxB,CAAN,GAAU,CAAV,IAAe3B,KAAKlC,WAAL,CAAiBkC,KAAKrB,OAAtB,EAA+B+C,MAA/B,EAAuCC,CAAvC,GAA2CwB,MAAMxB,CAAjD,IAAsD3B,KAAKnB,OAAL,GAAemB,KAAK7B,SAApB,GAAgC6B,KAAK3B,UAA3G,IACI8E,MAAMxB,CAAN,GAAU,CAAV,IAAe3B,KAAKlC,WAAL,CAAiBkC,KAAKtB,SAAtB,EAAiCgD,MAAjC,EAAyCC,CAAzC,GAA6CwB,MAAMxB,CAAnD,IAAwD3B,KAAKpB,OAAL,GAAeoB,KAAK7B,SAApB,GAAgC6B,KAAK3B,UADpH,EACiI;AAC7H,yBAAK,IAAIgB,IAAIW,KAAKtB,SAAlB,EAA6BW,KAAKW,KAAKrB,OAAvC,EAAgDU,GAAhD,EAAqD;AACjDW,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BC,CAA5B,IAAiCwB,MAAMxB,CAAvC;AACA3B,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BE,MAA5B,GAAqC,IAArC;AACH;AACJ;AACJ;AACJ;AACJ,KArWI;AAuWLb,cAvWK,sBAuWOD,KAvWP,EAuWcd,IAvWd,EAuWoB;AACrBjD,WAAG4C,GAAH,CAAO,YAAP;AACAK,aAAKhB,SAAL,GAAiB,KAAjB;AACA,YAAIgB,KAAKvB,aAAL,KAAuB,CAA3B,EAA8B;AAC1B,gBAAI+C,MAAMxB,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCkC,CAA5C;AACA,gBAAIC,SAAS1B,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCoC,CAA/C;AACA,gBAAIS,WAAW/B,KAAKmD,KAAL,CAAW,CAACxD,KAAK1B,QAAL,CAAcmD,CAAd,GAAkB,KAAKrD,WAAxB,IAAuC4B,KAAK9B,QAAvD,CAAf;AACA,gBAAIiF,QAAQf,WAAWV,MAAvB;AACA,gBAAI+B,aAAa,KAAjB;AACA;AACA;AACA;AACA,gBAAIN,QAAQ,CAAZ,EAAe;AACX,qBAAK,IAAI7D,IAAIU,KAAKtB,SAAlB,EAA6BY,KAAKU,KAAKrB,OAAL,GAAewE,KAAjD,EAAwD7D,GAAxD,EAA6D;AACzD,wBAAIA,IAAIU,KAAKtB,SAAL,GAAiByE,KAArB,IAA8B3B,OAAOxB,KAAKhC,IAAL,GAAY,CAAjD,IAAsDwD,OAAO,CAAjE,EAAoE;AAChE,4BAAIkB,QAAQlB,MAAM,CAAlB;AACA,+BAAOkB,QAAQ1C,KAAKhC,IAAb,IAAqBgC,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD,CAAC,CAArF,EAAwF;AACpFoF;AACH;AACD,4BAAIH,OAAOf,MAAM,CAAjB;AACA,+BAAOe,QAAQ,CAAR,IAAavC,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD,CAAC,CAA5E,EAA+E;AAC3EiF;AACH;AACD;AACA;AACA;AACA,4BAAIA,QAAQ,CAAR,IAAaG,QAAQ1C,KAAKhC,IAA1B,IAAkCgC,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD0C,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAAxI,IACG0C,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAD9D,EACiE;AAC7DmG,yCAAa,IAAb;AACA;AACH;AACJ;AACD,wBAAInE,KAAKU,KAAKtB,SAAL,GAAiByE,KAA1B,EAAiC;AAC7B,4BAAI3B,OAAOxB,KAAKhC,IAAL,GAAY,CAAvB,EAA0B;AACtB,gCAAI0E,QAAQlB,MAAM,CAAlB;AACA,mCAAOkB,QAAQ1C,KAAKhC,IAAb,IAAqBgC,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD,CAAC,CAArF,EAAwF;AACpFoF;AACH;AACD;AACA;AACA,gCAAIA,QAAQ1C,KAAKhC,IAAb,IAAqBgC,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD0C,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiC5D,YAAjC,CAA8C,KAA9C,EAAqDjC,IAAjI,IACG0C,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD,CAAC,CAD/D,EACkE;AAC1DmG,6CAAa,IAAb;AACA;AACP;AACJ;AACD,4BAAIjC,OAAO,CAAX,EAAc;AACV,gCAAIe,OAAOf,MAAM,CAAjB;AACA,mCAAOe,QAAQ,CAAR,IAAavC,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD,CAAC,CAA5E,EAA+E;AAC3EiF;AACH;AACD;AACA;AACA;AACA,gCAAIA,QAAQ,CAAR,IAAavC,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD0C,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiC5D,YAAjC,CAA8C,KAA9C,EAAqDjC,IAAzH,IACG0C,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAD9D,EACiE;AAC7DmG,6CAAa,IAAb;AACA;AACH;AACJ;AACJ;AACJ;AACD1G,mBAAG4C,GAAH,CAAO,iBAAiB8D,UAAxB;AACA,oBAAIA,UAAJ,EAAgB;AACZ,yBAAK,IAAInE,IAAIU,KAAKrB,OAAlB,EAA2BW,KAAKU,KAAKtB,SAArC,EAAgDY,GAAhD,EAAqD;AACjD;AACAU,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiC5D,YAAjC,CAA8C,KAA9C,EAAqDjC,IAArD,GAA4D0C,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CjC,IAAzG;AACA0C,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiC5D,YAAjC,CAA8CxC,GAAGoD,MAAjD,EAAyDC,WAAzD,GAAuEJ,KAAKxC,YAAL,CAAkBwC,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CjC,IAA/D,CAAvE;AACA0C,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiCN,KAAjC,GAAyC7C,KAAK9B,QAA9C;AACA8B,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiCL,MAAjC,GAA0C9C,KAAK7B,SAA/C;AACA,4BAAImB,IAAIU,KAAKtB,SAAL,GAAiByE,KAAzB,EAAgC;AAC5BnD,iCAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CjC,IAA7C,GAAoD,CAAC,CAArD;AACA0C,iCAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsCxC,GAAGoD,MAAzC,EAAiDC,WAAjD,GAA+DJ,KAAKxC,YAAL,CAAkB,EAAlB,CAA/D;AACH;AACD;AACAwC,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBmC,CAAzB,GAA6BzB,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CoC,CAA7C,GAAiD3B,KAAK9B,QAAtD,GAAiE8B,KAAK5B,WAAnG;AACA4B,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBsC,MAAzB,GAAkC,CAAlC;AACA5B,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBuD,KAAzB,GAAiC7C,KAAK9B,QAAtC;AACA8B,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBwD,MAAzB,GAAkC9C,KAAK7B,SAAvC;AACH;AACJ,iBAjBD,MAiBO;AACH,yBAAK,IAAImB,IAAIU,KAAKtB,SAAlB,EAA6BY,KAAKU,KAAKrB,OAAvC,EAAgDW,GAAhD,EAAqD;AACjDU,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBmC,CAAzB,GAA6BzB,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CoC,CAA7C,GAAiD3B,KAAK9B,QAAtD,GAAiE8B,KAAK5B,WAAnG;AACA4B,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBsC,MAAzB,GAAkC,CAAlC;AACH;AACJ;AACJ,aA1ED,MA0EO,IAAIuB,QAAQ,CAAZ,EAAe;AAClB,qBAAK,IAAI7D,IAAIU,KAAKtB,SAAL,GAAiByE,KAA9B,EAAqC7D,KAAKU,KAAKrB,OAA/C,EAAwDW,GAAxD,EAA6D;AACzD,wBAAIA,IAAIU,KAAKrB,OAAL,GAAewE,KAAnB,IAA4B3B,OAAOxB,KAAKhC,IAAL,GAAY,CAA/C,IAAoDwD,OAAO,CAA/D,EAAkE;AAC9D,4BAAIkB,QAAQlB,MAAM,CAAlB;AACA,+BAAOkB,QAAQ1C,KAAKhC,IAAb,IAAqBgC,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD,CAAC,CAArF,EAAwF;AACpFoF;AACH;AACD,4BAAIH,OAAOf,MAAM,CAAjB;AACA,+BAAOe,QAAQ,CAAR,IAAavC,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD,CAAC,CAA5E,EAA+E;AAC3EiF;AACH;AACD;AACA;AACA;AACA,4BAAIG,QAAQ1C,KAAKhC,IAAb,IAAqBuE,QAAQ,CAA7B,IAAkCvC,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD0C,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAAxI,IACG0C,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAD9D,EACiE;AAC7DmG,yCAAa,IAAb;AACA;AACH;AACJ;AACD,wBAAInE,KAAKU,KAAKrB,OAAL,GAAewE,KAAxB,EAA+B;AAC3B,4BAAI3B,OAAOxB,KAAKhC,IAAL,GAAY,CAAvB,EAA0B;AACtB,gCAAI0E,QAAQlB,MAAM,CAAlB;AACA,mCAAOkB,QAAQ1C,KAAKhC,IAAb,IAAqBgC,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD,CAAC,CAArF,EAAwF;AACpFoF;AACH;AACD;AACA;AACA,gCAAIA,QAAQ1C,KAAKhC,IAAb,IAAqBgC,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD0C,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiC5D,YAAjC,CAA8C,KAA9C,EAAqDjC,IAAjI,IACG0C,KAAKlC,WAAL,CAAiB4E,KAAjB,EAAwBpD,CAAxB,EAA2BC,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD,CAAC,CAD/D,EACkE;AAC1DmG,6CAAa,IAAb;AACA;AACP;AACJ;AACD,4BAAIjC,OAAO,CAAX,EAAc;AACV,gCAAIe,OAAOf,MAAM,CAAjB;AACA,mCAAOe,QAAQ,CAAR,IAAavC,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD,CAAC,CAA5E,EAA+E;AAC3EiF;AACH;AACD;AACA;AACA;AACA,gCAAIA,QAAQ,CAAR,IAAavC,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD0C,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiC5D,YAAjC,CAA8C,KAA9C,EAAqDjC,IAAzH,IACG0C,KAAKlC,WAAL,CAAiByE,IAAjB,EAAuBjD,CAAvB,EAA0BC,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAD9D,EACiE;AAC7DmG,6CAAa,IAAb;AACA;AACH;AACJ;AACJ;AACJ;AACD1G,mBAAG4C,GAAH,CAAO,iBAAiB8D,UAAxB;AACA,oBAAIA,UAAJ,EAAgB;AACZ,yBAAK,IAAInE,IAAIU,KAAKtB,SAAlB,EAA6BY,KAAKU,KAAKrB,OAAvC,EAAgDW,GAAhD,EAAqD;AACjD;AACAU,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiC5D,YAAjC,CAA8C,KAA9C,EAAqDjC,IAArD,GAA4D0C,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CjC,IAAzG;AACA0C,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiC5D,YAAjC,CAA8CxC,GAAGoD,MAAjD,EAAyDC,WAAzD,GAAuEJ,KAAKxC,YAAL,CAAkBwC,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CjC,IAA/D,CAAvE;AACA0C,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiCN,KAAjC,GAAyC7C,KAAK9B,QAA9C;AACA8B,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,IAAI6D,KAA1B,EAAiCL,MAAjC,GAA0C9C,KAAK7B,SAA/C;AACA,4BAAImB,IAAIU,KAAKrB,OAAL,GAAewE,KAAvB,EAA8B;AAC1BnD,iCAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CjC,IAA7C,GAAoD,CAAC,CAArD;AACA0C,iCAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsCxC,GAAGoD,MAAzC,EAAiDC,WAAjD,GAA+DJ,KAAKxC,YAAL,CAAkB,EAAlB,CAA/D;AACH;AACD;AACAwC,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBmC,CAAzB,GAA6BzB,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CoC,CAA7C,GAAiD3B,KAAK9B,QAAtD,GAAiE8B,KAAK5B,WAAnG;AACA4B,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBsC,MAAzB,GAAkC,CAAlC;AACA5B,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBuD,KAAzB,GAAiC7C,KAAK9B,QAAtC;AACA8B,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBwD,MAAzB,GAAkC9C,KAAK7B,SAAvC;AACH;AACJ,iBAjBD,MAiBO;AACH,yBAAK,IAAImB,IAAIU,KAAKtB,SAAlB,EAA6BY,KAAKU,KAAKrB,OAAvC,EAAgDW,GAAhD,EAAqD;AACjDU,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBmC,CAAzB,GAA6BzB,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CoC,CAA7C,GAAiD3B,KAAK9B,QAAtD,GAAiE8B,KAAK5B,WAAnG;AACA4B,6BAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBsC,MAAzB,GAAkC,CAAlC;AACH;AACJ;AACJ,aA1EM,MA0EA;AACH,qBAAK,IAAItC,IAAIU,KAAKtB,SAAlB,EAA6BY,KAAKU,KAAKrB,OAAvC,EAAgDW,GAAhD,EAAqD;AACjDU,yBAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBmC,CAAzB,GAA6BzB,KAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBC,YAAzB,CAAsC,KAAtC,EAA6CoC,CAA7C,GAAiD3B,KAAK9B,QAAtD,GAAiE8B,KAAK5B,WAAnG;AACA4B,yBAAKlC,WAAL,CAAiB0D,GAAjB,EAAsBlC,CAAtB,EAAyBsC,MAAzB,GAAkC,CAAlC;AACH;AACJ;AACJ,SAnKD,MAmKO,IAAI5B,KAAKvB,aAAL,KAAuB,CAA3B,EAA8B;AACjC,gBAAI+C,MAAMxB,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCkC,CAA5C;AACA,gBAAIC,SAAS1B,KAAK1B,QAAL,CAAciB,YAAd,CAA2B,KAA3B,EAAkCoC,CAA/C;AACA,gBAAIU,WAAWhC,KAAKmD,KAAL,CAAW,CAACxD,KAAK1B,QAAL,CAAcqD,CAAd,GAAkB3B,KAAK3B,UAAxB,IAAsC2B,KAAK7B,SAAtD,CAAf;AACA,gBAAIgF,QAAQd,WAAWb,GAAvB;AACA,gBAAIiC,aAAa,KAAjB;AACA1G,eAAG4C,GAAH,CAAO,UAAU6B,GAAjB;AACAzE,eAAG4C,GAAH,CAAO,eAAe0C,QAAtB;AACAtF,eAAG4C,GAAH,CAAO,YAAawD,KAApB;AACA,gBAAIA,QAAQ,CAAZ,EAAe;AACX,qBAAK,IAAI9D,IAAIW,KAAKtB,SAAlB,EAA6BW,KAAKW,KAAKrB,OAAL,GAAewE,KAAjD,EAAwD9D,GAAxD,EAA6D;AACzD,wBAAIA,IAAIW,KAAKtB,SAAL,GAAiByE,KAArB,IAA8BzB,UAAU1B,KAAK/B,OAAL,GAAe,CAAvD,IAA4DyD,UAAU,CAA1E,EAA6E;AACzE,4BAAIkB,QAAQlB,SAAS,CAArB;AACA,+BAAOkB,QAAQ5C,KAAK/B,OAAb,IAAwB+B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD,CAAC,CAAxF,EAA2F;AACvFsF;AACH;AACD,4BAAIH,OAAOf,SAAS,CAApB;AACA,+BAAOe,QAAQ,CAAR,IAAazC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD,CAAC,CAA5E,EAA+E;AAC3EmF;AACH;AACD;AACA;AACA;AACA,4BAAIA,QAAQ,CAAR,IAAaG,QAAQ5C,KAAK/B,OAA1B,IAAqC+B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA3I,IACG0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAD9D,EACiE;AAC7DmG,yCAAa,IAAb;AACA;AACH;AACJ;AACD,wBAAIpE,KAAKW,KAAKtB,SAAL,GAAiByE,KAA1B,EAAiC;AAC7B,4BAAIzB,UAAU1B,KAAK/B,OAAL,GAAe,CAA7B,EAAgC;AAC5B,gCAAI2E,QAAQlB,SAAS,CAArB;AACA,mCAAOkB,QAAQ5C,KAAK/B,OAAb,IAAwB+B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD,CAAC,CAAxF,EAA2F;AACvFsF;AACH;AACD;AACA;AACA,gCAAIA,QAAQ5C,KAAK/B,OAAb,IAAwB+B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD0C,KAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCnC,YAApC,CAAiD,KAAjD,EAAwDjC,IAAvI,IACG0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD,CAAC,CAD/D,EACkE;AAC1DmG,6CAAa,IAAb;AACA;AACP;AACJ;AACD,4BAAI/B,UAAU,CAAd,EAAiB;AACb,gCAAIe,OAAOf,SAAS,CAApB;AACA,mCAAOe,QAAQ,CAAR,IAAazC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD,CAAC,CAA5E,EAA+E;AAC3EmF;AACH;AACD;AACA;AACA;AACA,gCAAIA,QAAQ,CAAR,IAAazC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD0C,KAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCnC,YAApC,CAAiD,KAAjD,EAAwDjC,IAA5H,IACG0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAD9D,EACiE;AAC7DmG,6CAAa,IAAb;AACA;AACH;AACJ;AACJ;AACJ;AACD1G,mBAAG4C,GAAH,CAAO,iBAAiB8D,UAAxB;AACA,oBAAIA,UAAJ,EAAgB;AACZ,yBAAK,IAAIpE,IAAIW,KAAKrB,OAAlB,EAA2BU,KAAKW,KAAKtB,SAArC,EAAgDW,GAAhD,EAAqD;AACjD;AACAW,6BAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCnC,YAApC,CAAiD,KAAjD,EAAwDjC,IAAxD,GAA+D0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDjC,IAA/G;AACA0C,6BAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCnC,YAApC,CAAiDxC,GAAGoD,MAApD,EAA4DC,WAA5D,GAA0EJ,KAAKxC,YAAL,CAAkBwC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDjC,IAAlE,CAA1E;AACA0C,6BAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCmB,KAApC,GAA4C7C,KAAK9B,QAAjD;AACA8B,6BAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCoB,MAApC,GAA6C9C,KAAK7B,SAAlD;AACA,4BAAIkB,IAAIW,KAAKtB,SAAL,GAAiByE,KAAzB,EAAgC;AAC5BnD,iCAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDjC,IAAhD,GAAuD,CAAC,CAAxD;AACA0C,iCAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyCxC,GAAGoD,MAA5C,EAAoDC,WAApD,GAAkEJ,KAAKxC,YAAL,CAAkB,EAAlB,CAAlE;AACH;AACD;AACAwC,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BC,CAA5B,GAAgC3B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDkC,CAAhD,GAAoDzB,KAAK7B,SAAzD,GAAqE6B,KAAK3B,UAA1G;AACA2B,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BE,MAA5B,GAAqC,CAArC;AACA5B,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BmB,KAA5B,GAAoC7C,KAAK9B,QAAzC;AACA8B,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BoB,MAA5B,GAAqC9C,KAAK7B,SAA1C;AACH;AACJ,iBAjBD,MAiBO;AACH,yBAAK,IAAIkB,IAAIW,KAAKtB,SAAlB,EAA6BW,KAAKW,KAAKrB,OAAvC,EAAgDU,GAAhD,EAAqD;AACjDW,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BC,CAA5B,GAAgC3B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDkC,CAAhD,GAAoDzB,KAAK7B,SAAzD,GAAqE6B,KAAK3B,UAA1G;AACA2B,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BE,MAA5B,GAAqC,CAArC;AACH;AACJ;AACJ,aA1ED,MA0EO,IAAIuB,QAAQ,CAAZ,EAAe;AAClB,qBAAK,IAAI9D,IAAIW,KAAKtB,SAAL,GAAiByE,KAA9B,EAAqC9D,KAAKW,KAAKrB,OAA/C,EAAwDU,GAAxD,EAA6D;AACzD,wBAAIA,IAAIW,KAAKrB,OAAL,GAAewE,KAAnB,IAA4BzB,UAAU1B,KAAK/B,OAAL,GAAe,CAArD,IAA0DyD,UAAU,CAAxE,EAA2E;AACvE,4BAAIkB,QAAQlB,SAAS,CAArB;AACA,+BAAOkB,QAAQ5C,KAAK/B,OAAb,IAAwB+B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD,CAAC,CAAxF,EAA2F;AACvFsF;AACH;AACD,4BAAIH,OAAOf,SAAS,CAApB;AACA,+BAAOe,QAAQ,CAAR,IAAazC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD,CAAC,CAA5E,EAA+E;AAC3EmF;AACH;AACD1F,2BAAG4C,GAAH,CAAO,QAAQN,CAAR,GAAY,WAAZ,GAA0BuD,KAAjC;AACA,4BAAIA,QAAQ5C,KAAK/B,OAAjB,EAA0B;AACtBlB,+BAAG4C,GAAH,CAAOK,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAAtD;AACH;AACDP,2BAAG4C,GAAH,CAAO,QAAQN,CAAR,GAAY,UAAZ,GAAyBoD,IAAhC;AACA,4BAAIA,QAAQ,CAAZ,EAAe;AACX1F,+BAAG4C,GAAH,CAAOK,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAArD;AACH;AACD;AACA;AACA,4BAAIsF,QAAQ5C,KAAK/B,OAAb,IAAwBwE,QAAQ,CAAhC,IAAqCzC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA3I,IACG0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAD9D,EACiE;AAC7DmG,yCAAa,IAAb;AACA;AACH;AACJ;AACD,wBAAIpE,KAAKW,KAAKrB,OAAL,GAAewE,KAAxB,EAA+B;AAC3B,4BAAIzB,UAAU1B,KAAK/B,OAAL,GAAe,CAA7B,EAAgC;AAC5B,gCAAI2E,QAAQlB,SAAS,CAArB;AACA,mCAAOkB,QAAQ5C,KAAK/B,OAAb,IAAwB+B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,KAAwD,CAAC,CAAxF,EAA2F;AACvFsF;AACH;AACD7F,+BAAG4C,GAAH,CAAO,QAAQN,CAAR,GAAY,WAAZ,GAA0BuD,KAA1B,GAAkC,UAAlC,GAA+CA,KAA/C,GAAuD5C,KAAK/B,OAA5D,GAAsE+B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAArH,GAA4H,CAAC,CAApI;AACAP,+BAAG4C,GAAH,CAAO,QAAQN,CAAR,GAAY,YAAZ,GAA2BqC,MAA3B,GAAoC,SAApC,GAAgDyB,KAAhD,GAAwD,UAAxD,GAAqEnD,KAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCnC,YAApC,CAAiD,KAAjD,EAAwDjC,IAApI;AACA,gCAAIsF,QAAQ5C,KAAK/B,OAAb,IAAwB+B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD0C,KAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCnC,YAApC,CAAiD,KAAjD,EAAwDjC,IAAvI,IACG0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBuD,KAApB,EAA2BrD,YAA3B,CAAwC,KAAxC,EAA+CjC,IAA/C,IAAuD,CAAC,CAD/D,EACkE;AAC1DmG,6CAAa,IAAb;AACA;AACP;AACJ;AACD,4BAAI/B,UAAU,CAAd,EAAiB;AACb,gCAAIe,OAAOf,SAAS,CAApB;AACA,mCAAOe,QAAQ,CAAR,IAAazC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD,CAAC,CAA5E,EAA+E;AAC3EmF;AACH;AACD1F,+BAAG4C,GAAH,CAAO,QAAQN,CAAR,GAAY,UAAZ,GAAyBoD,IAAzB,GAAgC,UAAhC,GAA6CA,IAA7C,IAAqD,CAArD,GAAyDzC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAAvG,GAA8G,CAAC,CAAtH;AACAP,+BAAG4C,GAAH,CAAO,QAAQN,CAAR,GAAY,YAAZ,GAA2BqC,MAA3B,GAAoC,SAApC,GAAgDyB,KAAhD,GAAwD,UAAxD,GAAqEnD,KAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCnC,YAApC,CAAiD,KAAjD,EAAwDjC,IAApI;AACA,gCAAImF,QAAQ,CAAR,IAAazC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,KAAuD0C,KAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCnC,YAApC,CAAiD,KAAjD,EAAwDjC,IAA5H,IACG0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBoD,IAApB,EAA0BlD,YAA1B,CAAuC,KAAvC,EAA8CjC,IAA9C,IAAsD,CAAC,CAD9D,EACiE;AAC7DmG,6CAAa,IAAb;AACA;AACH;AACJ;AACJ;AACJ;AACD1G,mBAAG4C,GAAH,CAAO,iBAAiB8D,UAAxB;AACA,oBAAIA,UAAJ,EAAgB;AACZ,yBAAK,IAAIpE,IAAIW,KAAKtB,SAAlB,EAA6BW,KAAKW,KAAKrB,OAAvC,EAAgDU,GAAhD,EAAqD;AACjD;AACAW,6BAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCnC,YAApC,CAAiD,KAAjD,EAAwDjC,IAAxD,GAA+D0C,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDjC,IAA/G;AACA0C,6BAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCnC,YAApC,CAAiDxC,GAAGoD,MAApD,EAA4DC,WAA5D,GAA0EJ,KAAKxC,YAAL,CAAkBwC,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDjC,IAAlE,CAA1E;AACA0C,6BAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCmB,KAApC,GAA4C7C,KAAK9B,QAAjD;AACA8B,6BAAKlC,WAAL,CAAiBuB,IAAI8D,KAArB,EAA4BzB,MAA5B,EAAoCoB,MAApC,GAA6C9C,KAAK7B,SAAlD;AACA,4BAAIkB,IAAIW,KAAKrB,OAAL,GAAewE,KAAvB,EAA8B;AAC1BnD,iCAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDjC,IAAhD,GAAuD,CAAC,CAAxD;AACA0C,iCAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyCxC,GAAGoD,MAA5C,EAAoDC,WAApD,GAAkEJ,KAAKxC,YAAL,CAAkB,EAAlB,CAAlE;AACH;AACD;AACAwC,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BC,CAA5B,GAAgC3B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDkC,CAAhD,GAAoDzB,KAAK7B,SAAzD,GAAqE6B,KAAK3B,UAA1G;AACA2B,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BE,MAA5B,GAAqC,CAArC;AACA5B,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BmB,KAA5B,GAAoC7C,KAAK9B,QAAzC;AACA8B,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BoB,MAA5B,GAAqC9C,KAAK7B,SAA1C;AACH;AACJ,iBAjBD,MAiBO;AACH,yBAAK,IAAIkB,IAAIW,KAAKtB,SAAlB,EAA6BW,KAAKW,KAAKrB,OAAvC,EAAgDU,GAAhD,EAAqD;AACjDW,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BC,CAA5B,GAAgC3B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDkC,CAAhD,GAAoDzB,KAAK7B,SAAzD,GAAqE6B,KAAK3B,UAA1G;AACA2B,6BAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BE,MAA5B,GAAqC,CAArC;AACH;AACJ;AACJ,aAhFM,MAgFA;AACH,qBAAK,IAAIvC,IAAIW,KAAKtB,SAAlB,EAA6BW,KAAKW,KAAKrB,OAAvC,EAAgDU,GAAhD,EAAqD;AACjDW,yBAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BC,CAA5B,GAAgC3B,KAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BnC,YAA5B,CAAyC,KAAzC,EAAgDkC,CAAhD,GAAoDzB,KAAK7B,SAAzD,GAAqE6B,KAAK3B,UAA1G;AACA2B,yBAAKlC,WAAL,CAAiBuB,CAAjB,EAAoBqC,MAApB,EAA4BE,MAA5B,GAAqC,CAArC;AACH;AACJ;AACJ;AACD5B,aAAKvB,aAAL,GAAqB,CAAC,CAAtB;AACH,KAxrBI;AA0rBL8C,WA1rBK,qBA0rBK;AACN,YAAImC,QAAQ,IAAI3D,KAAJ,CAAU,KAAK/B,IAAL,GAAY,KAAKC,OAA3B,CAAZ;AACA,YAAI0F,IAAID,MAAME,MAAd;AAAA,YAAsBC,CAAtB;AAAA,YAAyBC,KAAzB;AACA,aAAK,IAAIzE,IAAI,CAAb,EAAgBA,IAAI,KAAKpB,OAAL,GAAe,CAAnC,EAAsCoB,GAAtC,EAA2C;AACvCqE,kBAAMrE,IAAI,CAAV,IAAeA,CAAf;AACAqE,kBAAMrE,IAAI,CAAJ,GAAQ,CAAd,IAAmBA,CAAnB;AACAqE,kBAAMrE,IAAI,CAAJ,GAAQ,CAAd,IAAmBA,CAAnB;AACAqE,kBAAMrE,IAAI,CAAJ,GAAQ,CAAd,IAAmBA,CAAnB;AACH;;AAED;AACA,eAAOsE,CAAP,EAAU;AACR;AACAG,oBAAQzD,KAAKyB,KAAL,CAAWzB,KAAK0C,MAAL,KAAgBY,GAA3B,CAAR;;AAEA;AACAE,gBAAIH,MAAMC,CAAN,CAAJ;AACAD,kBAAMC,CAAN,IAAWD,MAAMI,KAAN,CAAX;AACAJ,kBAAMI,KAAN,IAAeD,CAAf;AACD;;AAED,aAAK,IAAIxE,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,IAAzB,EAA+BqB,GAA/B,EAAoC;AAChC,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,OAAzB,EAAkCqB,GAAlC,EAAuC;AACnC,qBAAKxB,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,EAAuBC,YAAvB,CAAoCxC,GAAGoD,MAAvC,EAA+CC,WAA/C,GAA6D,KAAK5C,YAAL,CAAkBkG,MAAMrE,IAAI,KAAKpB,OAAT,GAAmBqB,CAAzB,CAAlB,CAA7D;AACA,qBAAKxB,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,EAAuBC,YAAvB,CAAoC,KAApC,EAA2CjC,IAA3C,GAAkDoG,MAAMrE,IAAI,KAAKpB,OAAT,GAAmBqB,CAAzB,CAAlD;AACA,qBAAKxB,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,EAAuBC,YAAvB,CAAoC,KAApC,EAA2CkC,CAA3C,GAA+CpC,CAA/C;AACA,qBAAKvB,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,EAAuBC,YAAvB,CAAoC,KAApC,EAA2CoC,CAA3C,GAA+CrC,CAA/C;AACA,qBAAKxB,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,EAAuBuD,KAAvB,GAA+B,KAAK3E,QAApC;AACA,qBAAKJ,WAAL,CAAiBuB,CAAjB,EAAoBC,CAApB,EAAuBwD,MAAvB,GAAgC,KAAK3E,SAArC;AACH;AACJ;AACJ,KAztBI;AA2tBL8E,aA3tBK,uBA2tBQ;AACT,YAAIc,OAAOhH,GAAGiH,MAAH,CAAU,CAAV,EAAajH,GAAG2D,EAAH,CAAML,KAAK0C,MAAL,KAAgB,KAAK7E,QAArB,GAAgC,KAAKD,OAArC,GAA+C,KAAKG,WAA1D,EAAuE,KAAKD,SAAL,GAAiB,KAAKH,IAAtB,GAA6B,CAApG,CAAb,CAAX;AACA,YAAIiG,QAAQlH,GAAGmH,MAAH,CAAU7D,KAAK0C,MAAL,KAAgB,CAA1B,EAA6BhG,GAAG2D,EAAH,CAAM,CAAN,EAAS,CAAC,KAAKvC,SAAf,CAA7B,EAAwDgG,MAAxD,CAA+DpH,GAAGqH,kBAAH,EAA/D,CAAZ;AACA,YAAIC,UAAUtH,GAAGuH,OAAH,CAAWjE,KAAK0C,MAAL,KAAgB,CAA3B,EAA8B,GAA9B,EAAmC,GAAnC,CAAd;AACA,YAAIwB,OAAOxH,GAAGmH,MAAH,CAAU7D,KAAK0C,MAAL,KAAgB,CAA1B,EAA6BhG,GAAG2D,EAAH,CAAM,CAAN,EAAS,CAAC,KAAKvC,SAAN,IAAmB,KAAKH,IAAL,GAAY,CAA/B,CAAT,CAA7B,EAA0EmG,MAA1E,CAAiFpH,GAAGqH,kBAAH,EAAjF,CAAX;AACA,YAAII,YAAYzH,GAAGuH,OAAH,CAAWjE,KAAK0C,MAAL,KAAgB,CAA3B,EAA8B,GAA9B,EAAmC,GAAnC,CAAhB;AACA,YAAI0B,MAAM1H,GAAGmH,MAAH,CAAU7D,KAAK0C,MAAL,KAAgB,CAA1B,EAA6BhG,GAAG2D,EAAH,CAAM,CAAN,EAAS,CAAC,KAAKvC,SAAf,CAA7B,CAAV;AACA,eAAOpB,GAAG2H,aAAH,CAAiB3H,GAAG4H,QAAH,CAAYZ,IAAZ,EAAkBE,KAAlB,EAAyBI,OAAzB,EAAkCE,IAAlC,EAAwCC,SAAxC,EAAmDC,GAAnD,CAAjB,CAAP;AACH,KAnuBI;AAquBLR,SAruBK,mBAquBI,CAER;AAvuBI;;AAyuBL;AAzuBJ","file":"game.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        paiPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n\n        spriteFrames: {\n            default: [],\n            type: [cc.SpriteFrame]\n        },\n\n        tutorial: {\n            default: null,\n            type: cc.Node\n        },\n\n        startButton: {\n            default: null,\n            type: cc.Button\n        },\n        _paiSprites: {\n            default: [],\n            type: [cc.Node]\n        },\n\n        _pais: null,\n\n        rows: 8,\n        columns: 17,\n\n        paiWidth: 60,\n        paiHeight: 90,\n\n        paddingLeft: 640,\n        paddingTop: 360,\n\n        _lastPai: null,\n        lastX: 0,\n        lastY: 0,\n\n        moveDirection: -1,\n        moveStart: 0,\n        moveEnd: 0,\n        moveMin: 0,\n        moveMax: 0,\n        originalX: 0,\n        originalY: 0,\n\n        mouseDown: false,\n        count: 0\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {},\n\n    onDestroy () {\n        var pais = \"\"\n        for (var i = 0; i < this.rows; i++) {\n            for (var j = 0; j < this.columns; j++) {\n                pais += this._paiSprites[i][j].getComponent('Pai').type + \" \"\n            }\n        }\n        cc.sys.localStorage.setItem('pais', pais)\n        cc.log('save state')\n    },\n\n    onGameStart () {\n        this.tutorial.active = false\n        this.startButton.active = false\n        this.startButton.enabled = false\n        this._pais = new Array()\n        this._paiSprites = new Array()\n        for (var i = 0; i < this.rows; i++) {\n            this._pais[i] = new Array(i)\n            this._paiSprites[i] = new Array(i)\n            for (var j = 0; j < this.columns; j++) {\n                this._pais[i][j] = -1\n                this._paiSprites[i][j] = null\n            }\n        }\n\n        var self = this\n        for (var i = 0; i < this.rows; i++) {\n            for (var j = 0; j < this.columns; j++) {\n                var newNode = cc.instantiate(this.paiPrefab)\n                newNode.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[Math.trunc((i * this.rows + j) / 4)]\n                this._paiSprites[i][j] = newNode\n                this.node.addChild(newNode)\n                newNode.setPosition(cc.v2(this.paiWidth * j - this.paddingLeft, this.paiHeight * i - this.paddingTop))\n            }\n        }\n        this.node.on(cc.Node.EventType.TOUCH_END, function(event) {\n            this.onTouchEnd(event, self)\n        }, this)\n        this.node.on(cc.Node.EventType.TOUCH_START, function(event) {\n            this.onTouchStart(event, self)\n        }, this)\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, function(event) {\n            this.onTouchMove(event, self)\n        }, this)\n\n        var paisStorage = cc.sys.localStorage.getItem('pais')\n        if (paisStorage != null) {\n            var pais = paisStorage.split(' ')\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    this._paiSprites[i][j].getComponent(cc.Sprite).spriteFrame = this.spriteFrames[pais[i * columns + j] == -1 ? 34 : pais[i * columns + j]]\n                    this._paiSprites[i][j].getComponent('Pai').type = pais[i * columns + j]\n                }\n            }\n        } else {\n            this.shuffle()\n        }\n    },\n\n    onTouchStart (event, self) {\n        if (self.mouseDown === true && self._lastPai != null) {\n            var row = self._lastPai.getComponent('Pai').x\n            var column = self._lastPai.getComponent('Pai').y\n            if (self.moveDirection === 0) {\n                for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                    self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                    self._paiSprites[row][j].zIndex = 0\n                }\n            } else if (self.moveDirection === 1) {\n                for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                    self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                    self._paiSprites[i][column].zIndex = 0\n                }\n            }\n        }\n        self.mouseDown = true\n        var currentPai = self._paiSprites[Math.floor(event.getLocationY() / this.paiHeight)][Math.floor(event.getLocationX() / this.paiWidth)]\n        if (self._lastPai != null) {\n            self._lastPai.color = cc.Color.WHITE\n            if (currentPai.getComponent('Pai').type === self._lastPai.getComponent('Pai').type && currentPai != self._lastPai) {\n                var currentX = currentPai.getComponent('Pai').x\n                var currentY = currentPai.getComponent('Pai').y\n                var lastX = self._lastPai.getComponent('Pai').x\n                var lastY = self._lastPai.getComponent('Pai').y\n\n                cc.log(\"current: \" + currentX + \",\" + currentY)\n                cc.log(\"last: \" + lastX + \",\" + lastY)\n                var match = true\n                var lowX = Math.min(currentX, lastX)\n                var lowY = Math.min(currentY, lastY)\n                var highX = Math.max(currentX, lastX)\n                var highY = Math.max(currentY, lastY)\n\n                if ((currentX < lastX && currentY < lastY) || (currentX >= lastX && currentY >= lastY)) {\n                    cc.log(\"a\")\n                    for (var i = lowX + 1; i <= highX; i++) {\n                        cc.log(\"a1: \" + i + \",\" + lowY + \":\" + self._paiSprites[i][lowY].getComponent('Pai').type)\n                        if (i != highX && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                            match = false\n                            break\n                        }\n                    }\n\n                    if (match) {\n                        for (var j = lowY; j < highY; j++) {\n                            cc.log(\"a2: \" + highX + \",\" + j + \":\" + self._paiSprites[highX][j].getComponent('Pai').type)\n                            if (self._paiSprites[highX][j].getComponent('Pai').type != -1) {\n                                match = false\n                                break\n                            }\n                        }\n                    }\n\n                    if (!match) {\n                        match = true\n                        for (var j = lowY + 1; j <= highY; j++) {\n                            cc.log(\"a3: \" + lowX + \",\" + j + \":\" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                            if (j != highY && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                                match = false\n                                break\n                            }\n                        }\n\n                        if (match) {\n                            for (var i = lowX; i < highX; i++) {\n                                cc.log(\"a4: \" + i + \",\" + highY + \":\" + self._paiSprites[i][highY].getComponent('Pai').type)\n                                if (self._paiSprites[i][highY].getComponent('Pai').type != -1) {\n                                    match = false\n                                    break\n                                }\n                            }\n                        }\n                    }\n                } else if ((currentX >= lastX && currentY < lastY) || (currentX < lastX && currentY >= lastY)) {\n                    cc.log(\"b\")\n                    for (var i = lowX + 1; i <= highX; i++) {\n                        cc.log(\"b1: \" + i + \",\" + highY + \":\" + self._paiSprites[i][highY].getComponent('Pai').type)\n                        if (i != highX && self._paiSprites[i][highY].getComponent('Pai').type != -1) {\n                            match = false\n                            break\n                        }\n                    }\n\n                    if (match) {\n                        for (var j = highY; j > lowY; j--) {\n                            cc.log(\"b2: \" + highX + \",\" + j + \":\" + self._paiSprites[highX][j].getComponent('Pai').type)\n                            if (self._paiSprites[highX][j].getComponent('Pai').type != -1) {\n                                match = false\n                                break\n                            }\n                        }\n                    }\n\n                    if (!match) {\n                        match = true\n                        for (var j = highY - 1; j >= lowY; j--) {\n                            cc.log(\"b3: \" + lowX + \",\" + j + \":\" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                            if (j != lowY && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                                match = false\n                                break\n                            }\n                        }\n\n                        if (match) {\n                            for (var i = lowX; i < highX; i++) {\n                                cc.log(\"b4: \" + i + \",\" + lowY + \":\" + self._paiSprites[i][lowY].getComponent('Pai').type)\n                                if (self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                                    match = false\n                                    break\n                                }\n                            }\n                        }\n                    }\n                }\n                if (match) {\n                    currentPai.getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                    currentPai.width = this.paiWidth\n                    currentPai.height = this.paiHeight\n                    self._lastPai.getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                    self._lastPai.width = this.paiWidth\n                    self._lastPai.height = this.paiHeight\n                    currentPai.getComponent('Pai').type = -1\n                    self._lastPai.getComponent('Pai').type = -1\n                    currentPai.color = cc.Color.WHITE\n                    self.count += 2\n                    if (self.count >= self.rows * self.columns) {\n                        for (var i = 0; i < this.rows; i++) {\n                            for (var j = 0; j < this.columns; j++) {\n                                self._paiSprites[i][j].getComponent(cc.Sprite).spriteFrame = this.spriteFrames[Math.trunc(Math.random() * 35)]\n                                self._paiSprites[i][j].runAction(self.winSplash())\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        currentPai.color = cc.Color.GRAY\n        self._lastPai = currentPai\n        self.originalX = currentPai.getComponent('Pai').x\n        self.originalY = currentPai.getComponent('Pai').y\n    },\n\n    onTouchMove (event, self) {\n        var delta = event.getDelta()\n        var location = event.getLocation()\n        if (self._lastPai != null) {\n            var x = self._lastPai.getComponent('Pai').x\n            var y = self._lastPai.getComponent('Pai').y\n            if (self.moveDirection === -1) {\n                if (Math.abs(delta.x) > Math.abs(delta.y)) {\n                    self.moveDirection = 0\n                    if (y === 0) {\n                        self.moveStart = 0\n                        self.moveMin = 0\n                    } else {\n                        var i = y - 1\n                        while (i >= 0 && self._paiSprites[x][i].getComponent('Pai').type != -1) {\n                            i--\n                        }\n                        self.moveStart = i + 1\n                        while (i >= 0 && self._paiSprites[x][i].getComponent('Pai').type === -1) {\n                            i--\n                        }\n                        self.moveMin = i + 1\n                    }\n                    if (y === self.columns - 1) {\n                        self.moveEnd = self.columns - 1\n                        self.moveMax = self.columns - 1\n                    } else {\n                        var i = y + 1\n                        while (i < self.columns && self._paiSprites[x][i].getComponent('Pai').type != -1) {\n                            i++\n                        }\n                        self.moveEnd = i - 1\n                        while (i < self.columns && self._paiSprites[x][i].getComponent('Pai').type === -1) {\n                            i++\n                        }\n                        self.moveMax = i - 1\n                    }\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                        self._paiSprites[x][j].zIndex = 1000\n                    }\n                } else {\n                    self.moveDirection = 1\n                    if (x === 0) {\n                        self.moveStart = 0\n                        self.moveMin = 0\n                    } else {\n                        var i = x - 1\n                        while (i >= 0 && self._paiSprites[i][y].getComponent('Pai').type != -1) {\n                            i--\n                        }\n                        self.moveStart = i + 1\n                        while (i >= 0 && self._paiSprites[i][y].getComponent('Pai').type === -1) {\n                            i--\n                        }\n                        self.moveMin = i + 1\n                    }\n                    if (x === self.rows - 1) {\n                        self.moveEnd = self.rows - 1\n                    } else {\n                        var i = x + 1\n                        while (i < self.rows && self._paiSprites[i][y].getComponent('Pai').type != -1) {\n                            i++\n                        }\n                        self.moveEnd = i - 1\n                        while (i < self.rows && self._paiSprites[i][y].getComponent('Pai').type === -1) {\n                            i++\n                        }\n                        self.moveMax = i - 1\n                    }\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                        self._paiSprites[i][y].zIndex = 1000\n                    }\n                }\n            }\n\n            if (self.moveDirection === 0) {\n                var row = self._lastPai.getComponent('Pai').x\n                if ((delta.x > 0 && self._paiSprites[row][self.moveEnd].x + delta.x <= self.moveMax * self.paiWidth - self.paddingLeft)\n                    || (delta.x < 0 && self._paiSprites[row][self.moveStart].x + delta.x >= self.moveMin * self.paiWidth - self.paddingLeft)) {\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                        self._paiSprites[row][j].x += delta.x\n                        self._paiSprites[row][j].zIndex = 1000\n                    }\n                }\n            } else {\n                var column = self._lastPai.getComponent('Pai').y\n                if ((delta.y > 0 && self._paiSprites[self.moveEnd][column].y + delta.y <= self.moveMax * self.paiHeight - self.paddingTop)\n                    || (delta.y < 0 && self._paiSprites[self.moveStart][column].y + delta.y >= self.moveMin * self.paiHeight - self.paddingTop)) {\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                        self._paiSprites[i][column].y += delta.y\n                        self._paiSprites[i][column].zIndex = 1000\n                    }\n                }\n            }\n        }\n    },\n\n    onTouchEnd (event, self) {\n        cc.log('touchEnd: ')\n        self.mouseDown = false\n        if (self.moveDirection === 0) {\n            var row = self._lastPai.getComponent('Pai').x\n            var column = self._lastPai.getComponent('Pai').y\n            var currentX = Math.round((self._lastPai.x + this.paddingLeft) / self.paiWidth)\n            var delta = currentX - column\n            var matchFound = false\n            // cc.log('column: ' + column)\n            // cc.log('currentX: ' + currentX)\n            // cc.log('delta: '  + delta)\n            if (delta > 0) {\n                for (var j = self.moveStart; j <= self.moveEnd + delta; j++) {\n                    if (j < self.moveStart + delta && row != self.rows - 1 && row != 0) {\n                        var highX = row + 1\n                        while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\n                            highX++\n                        }\n                        var lowX = row - 1\n                        while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\n                            lowX--\n                        }\n                        //cc.log('lowX: ' + lowX)\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                        if (lowX >= 0 && highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === self._paiSprites[lowX][j].getComponent('Pai').type\n                            && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                            matchFound = true\n                            break\n                        }\n                    }\n                    if (j >= self.moveStart + delta) {\n                        if (row != self.rows - 1) {\n                            var highX = row + 1\n                            while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\n                                highX++\n                            }\n                            //cc.log('highX: ' + highX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type == self._paiSprites[row][j - delta].getComponent('Pai').type\n                                && self._paiSprites[highX][j].getComponent('Pai').type != -1) {\n                                    matchFound = true\n                                    break\n                            }\n                        }\n                        if (row != 0) {\n                            var lowX = row - 1\n                            while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\n                                lowX--\n                            }\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j)\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === self._paiSprites[row][j - delta].getComponent('Pai').type\n                                && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                                matchFound = true\n                                break\n                            }\n                        }\n                    }\n                }\n                cc.log(\"matchFound: \" + matchFound)\n                if (matchFound) {\n                    for (var j = self.moveEnd; j >= self.moveStart; j--) {\n                        //cc.log(\"x: \" + row + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\n                        self._paiSprites[row][j + delta].getComponent('Pai').type = self._paiSprites[row][j].getComponent('Pai').type\n                        self._paiSprites[row][j + delta].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[self._paiSprites[row][j].getComponent('Pai').type]\n                        self._paiSprites[row][j + delta].width = self.paiWidth\n                        self._paiSprites[row][j + delta].height = self.paiHeight\n                        if (j < self.moveStart + delta) {\n                            self._paiSprites[row][j].getComponent('Pai').type = -1\n                            self._paiSprites[row][j].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                        }\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                        self._paiSprites[row][j].zIndex = 0\n                        self._paiSprites[row][j].width = self.paiWidth\n                        self._paiSprites[row][j].height = self.paiHeight\n                    }\n                } else {\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                        self._paiSprites[row][j].zIndex = 0\n                    }\n                }\n            } else if (delta < 0) {\n                for (var j = self.moveStart + delta; j <= self.moveEnd; j++) {\n                    if (j > self.moveEnd + delta && row != self.rows - 1 && row != 0) {\n                        var highX = row + 1\n                        while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\n                            highX++\n                        }\n                        var lowX = row - 1\n                        while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\n                            lowX--\n                        }\n                        //cc.log('lowX: ' + lowX)\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                        if (highX < self.rows && lowX >= 0 && self._paiSprites[highX][j].getComponent('Pai').type === self._paiSprites[lowX][j].getComponent('Pai').type\n                            && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                            matchFound = true\n                            break\n                        }\n                    }\n                    if (j <= self.moveEnd + delta) {\n                        if (row != self.rows - 1) {\n                            var highX = row + 1\n                            while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\n                                highX++\n                            }\n                            //cc.log('highX: ' + highX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type == self._paiSprites[row][j - delta].getComponent('Pai').type\n                                && self._paiSprites[highX][j].getComponent('Pai').type != -1) {\n                                    matchFound = true\n                                    break\n                            }\n                        }\n                        if (row != 0) {\n                            var lowX = row - 1\n                            while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\n                                lowX--\n                            }\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j)\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === self._paiSprites[row][j - delta].getComponent('Pai').type\n                                && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                                matchFound = true\n                                break\n                            }\n                        }\n                    }\n                }\n                cc.log(\"matchFound: \" + matchFound)\n                if (matchFound) {\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                        //cc.log(\"x: \" + row + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\n                        self._paiSprites[row][j + delta].getComponent('Pai').type = self._paiSprites[row][j].getComponent('Pai').type\n                        self._paiSprites[row][j + delta].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[self._paiSprites[row][j].getComponent('Pai').type]\n                        self._paiSprites[row][j + delta].width = self.paiWidth\n                        self._paiSprites[row][j + delta].height = self.paiHeight\n                        if (j > self.moveEnd + delta) {\n                            self._paiSprites[row][j].getComponent('Pai').type = -1\n                            self._paiSprites[row][j].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                        }\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                        self._paiSprites[row][j].zIndex = 0\n                        self._paiSprites[row][j].width = self.paiWidth\n                        self._paiSprites[row][j].height = self.paiHeight\n                    }\n                } else {\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                        self._paiSprites[row][j].zIndex = 0\n                    }\n                }\n            } else {\n                for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                    self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                    self._paiSprites[row][j].zIndex = 0\n                }\n            }\n        } else if (self.moveDirection === 1) {\n            var row = self._lastPai.getComponent('Pai').x\n            var column = self._lastPai.getComponent('Pai').y\n            var currentY = Math.round((self._lastPai.y + self.paddingTop) / self.paiHeight)\n            var delta = currentY - row\n            var matchFound = false\n            cc.log('row: ' + row)\n            cc.log('currentY: ' + currentY)\n            cc.log('delta: '  + delta)\n            if (delta > 0) {\n                for (var i = self.moveStart; i <= self.moveEnd + delta; i++) {\n                    if (i < self.moveStart + delta && column != self.columns - 1 && column != 0) {\n                        var highY = column + 1\n                        while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\n                            highY++\n                        }\n                        var lowY = column - 1\n                        while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\n                            lowY--\n                        }\n                        //cc.log('lowY: ' + lowY)\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                        if (lowY >= 0 && highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === self._paiSprites[i][lowY].getComponent('Pai').type\n                            && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                            matchFound = true\n                            break\n                        }\n                    }\n                    if (i >= self.moveStart + delta) {\n                        if (column != self.columns - 1) {\n                            var highY = column + 1\n                            while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\n                                highY++\n                            }\n                            //cc.log('highY: ' + highY + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type == self._paiSprites[i - delta][column].getComponent('Pai').type\n                                && self._paiSprites[i][highY].getComponent('Pai').type != -1) {\n                                    matchFound = true\n                                    break\n                            }\n                        }\n                        if (column != 0) {\n                            var lowY = column - 1\n                            while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\n                                lowY--\n                            }\n                            //cc.log('lowY: ' + lowY)\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === self._paiSprites[i - delta][column].getComponent('Pai').type\n                                && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                                matchFound = true\n                                break\n                            }\n                        }\n                    }\n                }\n                cc.log(\"matchFound: \" + matchFound)\n                if (matchFound) {\n                    for (var i = self.moveEnd; i >= self.moveStart; i--) {\n                        //cc.log(\"x: \" + i + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\n                        self._paiSprites[i + delta][column].getComponent('Pai').type = self._paiSprites[i][column].getComponent('Pai').type\n                        self._paiSprites[i + delta][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[self._paiSprites[i][column].getComponent('Pai').type]\n                        self._paiSprites[i + delta][column].width = self.paiWidth\n                        self._paiSprites[i + delta][column].height = self.paiHeight\n                        if (i < self.moveStart + delta) {\n                            self._paiSprites[i][column].getComponent('Pai').type = -1\n                            self._paiSprites[i][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                        }\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                        self._paiSprites[i][column].zIndex = 0\n                        self._paiSprites[i][column].width = self.paiWidth\n                        self._paiSprites[i][column].height = self.paiHeight\n                    }\n                } else {\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                        self._paiSprites[i][column].zIndex = 0\n                    }\n                }\n            } else if (delta < 0) {\n                for (var i = self.moveStart + delta; i <= self.moveEnd; i++) {\n                    if (i > self.moveEnd + delta && column != self.columns - 1 && column != 0) {\n                        var highY = column + 1\n                        while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\n                            highY++\n                        }\n                        var lowY = column - 1\n                        while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\n                            lowY--\n                        }\n                        cc.log('i: ' + i + \", highY: \" + highY)\n                        if (highY < self.columns) {\n                            cc.log(self._paiSprites[i][highY].getComponent('Pai').type)\n                        }\n                        cc.log('i: ' + i + \", lowY: \" + lowY)\n                        if (lowY >= 0) {\n                            cc.log(self._paiSprites[i][lowY].getComponent('Pai').type)\n                        }\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                        if (highY < self.columns && lowY >= 0 && self._paiSprites[i][highY].getComponent('Pai').type === self._paiSprites[i][lowY].getComponent('Pai').type\n                            && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                            matchFound = true\n                            break\n                        }\n                    }\n                    if (i <= self.moveEnd + delta) {\n                        if (column != self.columns - 1) {\n                            var highY = column + 1\n                            while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\n                                highY++\n                            }\n                            cc.log('i: ' + i + \", highY: \" + highY + \", type: \" + highY < self.columns ? self._paiSprites[i][highY].getComponent('Pai').type : -1)\n                            cc.log('i: ' + i + \", column: \" + column + \", delta\" + delta + \", type: \" + self._paiSprites[i - delta][column].getComponent('Pai').type)\n                            if (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type == self._paiSprites[i - delta][column].getComponent('Pai').type\n                                && self._paiSprites[i][highY].getComponent('Pai').type != -1) {\n                                    matchFound = true\n                                    break\n                            }\n                        }\n                        if (column != 0) {\n                            var lowY = column - 1\n                            while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\n                                lowY--\n                            }\n                            cc.log('i: ' + i + \", lowY: \" + lowY + \", type: \" + lowY >= 0 ? self._paiSprites[i][lowY].getComponent('Pai').type : -1)\n                            cc.log('i: ' + i + \", column: \" + column + \", delta\" + delta + \", type: \" + self._paiSprites[i - delta][column].getComponent('Pai').type)\n                            if (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === self._paiSprites[i - delta][column].getComponent('Pai').type\n                                && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                                matchFound = true\n                                break\n                            }\n                        }\n                    }\n                }\n                cc.log(\"matchFound: \" + matchFound)\n                if (matchFound) {\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                        //cc.log(\"x: \" + row + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\n                        self._paiSprites[i + delta][column].getComponent('Pai').type = self._paiSprites[i][column].getComponent('Pai').type\n                        self._paiSprites[i + delta][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[self._paiSprites[i][column].getComponent('Pai').type]\n                        self._paiSprites[i + delta][column].width = self.paiWidth\n                        self._paiSprites[i + delta][column].height = self.paiHeight\n                        if (i > self.moveEnd + delta) {\n                            self._paiSprites[i][column].getComponent('Pai').type = -1\n                            self._paiSprites[i][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                        }\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                        self._paiSprites[i][column].zIndex = 0\n                        self._paiSprites[i][column].width = self.paiWidth\n                        self._paiSprites[i][column].height = self.paiHeight\n                    }\n                } else {\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                        self._paiSprites[i][column].zIndex = 0\n                    }\n                }\n            } else {\n                for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                    self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                    self._paiSprites[i][column].zIndex = 0\n                }\n            }\n        }\n        self.moveDirection = -1\n    },\n\n    shuffle() {\n        var array = new Array(this.rows * this.columns)\n        var m = array.length, t, index;\n        for (var i = 0; i < this.columns * 2; i++) {\n            array[i * 4] = i\n            array[i * 4 + 1] = i\n            array[i * 4 + 2] = i\n            array[i * 4 + 3] = i\n        }\n\n        // While there remain elements to shuffle\n        while (m) {\n          // Pick a remaining element\n          index = Math.floor(Math.random() * m--);\n\n          // And swap it with the current element.\n          t = array[m];\n          array[m] = array[index];\n          array[index] = t;\n        }\n\n        for (var i = 0; i < this.rows; i++) {\n            for (var j = 0; j < this.columns; j++) {\n                this._paiSprites[i][j].getComponent(cc.Sprite).spriteFrame = this.spriteFrames[array[i * this.columns + j]]\n                this._paiSprites[i][j].getComponent('Pai').type = array[i * this.columns + j]\n                this._paiSprites[i][j].getComponent('Pai').x = i\n                this._paiSprites[i][j].getComponent('Pai').y = j\n                this._paiSprites[i][j].width = this.paiWidth\n                this._paiSprites[i][j].height = this.paiHeight\n            }\n        }\n    },\n\n    winSplash () {\n        var init = cc.moveTo(0, cc.v2(Math.random() * this.paiWidth * this.columns - this.paddingLeft, this.paiHeight * this.rows / 2))\n        var start = cc.moveBy(Math.random() / 2, cc.v2(0, -this.paiHeight)).easing(cc.easeCubicActionOut());\n        var scaleUp = cc.scaleTo(Math.random() / 2, 0.8, 0.8)\n        var move = cc.moveBy(Math.random() * 3, cc.v2(0, -this.paiHeight * (this.rows - 2))).easing(cc.easeCubicActionOut());\n        var scaleDown = cc.scaleTo(Math.random() / 2, 0.5, 0.5)\n        var end = cc.moveBy(Math.random() / 2, cc.v2(0, -this.paiHeight))\n        return cc.repeatForever(cc.sequence(init, start, scaleUp, move, scaleDown, end))\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n});\n"]}