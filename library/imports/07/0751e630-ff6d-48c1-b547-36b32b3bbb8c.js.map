{"version":3,"sources":["../../../../assets/scripts/assets/scripts/game.js"],"names":["cc","Class","extends","Component","properties","paiPrefab","default","type","Prefab","spriteFrames","SpriteFrame","tutorial","Node","startButton","Button","_paiSprites","_pais","rows","columns","paiWidth","paiHeight","paddingLeft","paddingTop","_lastPai","lastX","lastY","moveDirection","moveStart","moveEnd","moveMin","moveMax","originalX","originalY","mouseDown","count","coward","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","event","keyCode","macro","KEY","n","getComponent","i","index","x","y","color","Color","WHITE","onDestroy","pais","j","sys","localStorage","setItem","log","onGameStart","Array","self","newNode","instantiate","Sprite","spriteFrame","Math","trunc","node","addChild","setPosition","v2","TOUCH_END","onTouchEnd","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","paisStorage","getItem","split","shuffle","active","enabled","visable","row","column","zIndex","currentPai","floor","getLocationY","getLocationX","currentX","currentY","match","lowX","min","lowY","highX","max","highY","width","height","random","runAction","winSplash","GRAY","delta","getDelta","location","getLocation","abs","round","matchFound","array","m","length","t","init","moveTo","start","moveBy","easing","easeCubicActionOut","scaleUp","scaleTo","move","scaleDown","end","repeatForever","sequence"],"mappings":"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","file":"game.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        paiPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n\n        spriteFrames: {\n            default: [],\n            type: [cc.SpriteFrame]\n        },\n\n        tutorial: {\n            default: null,\n            type: cc.Node\n        },\n\n        startButton: {\n            default: null,\n            type: cc.Button\n        },\n        _paiSprites: {\n            default: [],\n            type: [cc.Node]\n        },\n\n        _pais: null,\n\n        rows: 8,\n        columns: 17,\n\n        paiWidth: 60,\n        paiHeight: 90,\n\n        paddingLeft: 640,\n        paddingTop: 360,\n\n        _lastPai: null,\n        lastX: 0,\n        lastY: 0,\n\n        moveDirection: -1,\n        moveStart: 0,\n        moveEnd: 0,\n        moveMin: 0,\n        moveMax: 0,\n        originalX: 0,\n        originalY: 0,\n\n        mouseDown: false,\n        count: 0,\n\n        coward: false\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this)\n    },\n\n    onKeyDown (event) {\n        switch(event.keyCode) {\n            case cc.macro.KEY.n:\n                if (this.coward && this._lastPai != null && this._lastPai.getComponent('Pai').type != -1) {\n                    for (var i = 0; i < 4; i++) {\n                        var index = this._pais[this._lastPai.getComponent('Pai').type  * 4 + i]\n                        if (index != null) {\n                            this._paiSprites[index.x][index.y].color = cc.Color.WHITE\n                        }\n                    }\n                }\n                this.coward = !this.coward\n                break\n        }\n    },\n\n    onDestroy () {\n        var pais = \"\"\n        for (var i = 0; i < this.rows; i++) {\n            for (var j = 0; j < this.columns; j++) {\n                pais += this._paiSprites[i][j].getComponent('Pai').type + \" \"\n            }\n        }\n        cc.sys.localStorage.setItem('pais', pais)\n        cc.log('save state')\n    },\n\n    onGameStart () {\n        this._pais = new Array(this.rows * this.columns)\n        this._paiSprites = new Array(this.rows)\n        for (var i = 0; i < this.rows; i++) {\n            this._paiSprites[i] = new Array(this.columns)\n            for (var j = 0; j < this.columns; j++) {\n                this._paiSprites[i][j] = null\n            }\n        }\n\n        var self = this\n        for (var i = 0; i < this.rows; i++) {\n            for (var j = 0; j < this.columns; j++) {\n                var newNode = cc.instantiate(this.paiPrefab)\n                newNode.getComponent(cc.Sprite).spriteFrame = this.spriteFrames[Math.trunc((i * this.rows + j) / 4)]\n                this._paiSprites[i][j] = newNode\n                this.node.addChild(newNode)\n                newNode.setPosition(cc.v2(this.paiWidth * j - this.paddingLeft, this.paiHeight * i - this.paddingTop))\n            }\n        }\n        this.node.on(cc.Node.EventType.TOUCH_END, function(event) {\n            this.onTouchEnd(event, self)\n        }, this)\n        this.node.on(cc.Node.EventType.TOUCH_START, function(event) {\n            this.onTouchStart(event, self)\n        }, this)\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, function(event) {\n            this.onTouchMove(event, self)\n        }, this)\n\n        var paisStorage = cc.sys.localStorage.getItem('pais')\n        if (paisStorage != null) {\n            var pais = paisStorage.split(' ')\n            for (var i = 0; i < this.rows; i++) {\n                for (var j = 0; j < this.columns; j++) {\n                    this._paiSprites[i][j].getComponent(cc.Sprite).spriteFrame = this.spriteFrames[pais[i * columns + j] == -1 ? 34 : pais[i * columns + j]]\n                    this._paiSprites[i][j].getComponent('Pai').type = pais[i * columns + j]\n                }\n            }\n        } else {\n            this.shuffle()\n        }\n        this.tutorial.active = false\n        this.startButton.active = false\n        this.startButton.enabled = false\n        this.startButton.visable = false\n    },\n\n    onTouchStart (event, self) {\n        if (self.mouseDown === true && self._lastPai != null) {\n            var row = self._lastPai.getComponent('Pai').x\n            var column = self._lastPai.getComponent('Pai').y\n            if (self.moveDirection === 0) {\n                for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                    self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                    self._paiSprites[row][j].zIndex = 0\n                }\n            } else if (self.moveDirection === 1) {\n                for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                    self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                    self._paiSprites[i][column].zIndex = 0\n                }\n            }\n        }\n        self.mouseDown = true\n        var currentPai = self._paiSprites[Math.floor(event.getLocationY() / this.paiHeight)][Math.floor(event.getLocationX() / this.paiWidth)]\n        if (self._lastPai != null) {\n            self._lastPai.color = cc.Color.WHITE\n            if (self.coward && self._lastPai.getComponent('Pai').type != -1) {\n                for (var i = 0; i < 4; i++) {\n                    var index = self._pais[self._lastPai.getComponent('Pai').type  * 4 + i]\n                    if (index != null) {\n                        self._paiSprites[index.x][index.y].color = cc.Color.WHITE\n                    }\n                }\n            }\n            if (currentPai.getComponent('Pai').type === self._lastPai.getComponent('Pai').type && self._lastPai.getComponent('Pai').type != -1 && currentPai != self._lastPai) {\n                var currentX = currentPai.getComponent('Pai').x\n                var currentY = currentPai.getComponent('Pai').y\n                var lastX = self._lastPai.getComponent('Pai').x\n                var lastY = self._lastPai.getComponent('Pai').y\n\n                cc.log(\"current: \" + currentX + \",\" + currentY)\n                cc.log(\"last: \" + lastX + \",\" + lastY)\n                var match = true\n                var lowX = Math.min(currentX, lastX)\n                var lowY = Math.min(currentY, lastY)\n                var highX = Math.max(currentX, lastX)\n                var highY = Math.max(currentY, lastY)\n\n                if ((currentX < lastX && currentY < lastY) || (currentX >= lastX && currentY >= lastY)) {\n                    cc.log(\"a\")\n                    for (var i = lowX + 1; i <= highX; i++) {\n                        cc.log(\"a1: \" + i + \",\" + lowY + \":\" + self._paiSprites[i][lowY].getComponent('Pai').type)\n                        if (i != highX && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                            match = false\n                            break\n                        }\n                    }\n\n                    if (match) {\n                        for (var j = lowY; j < highY; j++) {\n                            cc.log(\"a2: \" + highX + \",\" + j + \":\" + self._paiSprites[highX][j].getComponent('Pai').type)\n                            if (self._paiSprites[highX][j].getComponent('Pai').type != -1) {\n                                match = false\n                                break\n                            }\n                        }\n                    }\n\n                    if (!match) {\n                        match = true\n                        for (var j = lowY + 1; j <= highY; j++) {\n                            cc.log(\"a3: \" + lowX + \",\" + j + \":\" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                            if (j != highY && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                                match = false\n                                break\n                            }\n                        }\n\n                        if (match) {\n                            for (var i = lowX; i < highX; i++) {\n                                cc.log(\"a4: \" + i + \",\" + highY + \":\" + self._paiSprites[i][highY].getComponent('Pai').type)\n                                if (self._paiSprites[i][highY].getComponent('Pai').type != -1) {\n                                    match = false\n                                    break\n                                }\n                            }\n                        }\n                    }\n                } else if ((currentX >= lastX && currentY < lastY) || (currentX < lastX && currentY >= lastY)) {\n                    cc.log(\"b\")\n                    for (var i = lowX + 1; i <= highX; i++) {\n                        cc.log(\"b1: \" + i + \",\" + highY + \":\" + self._paiSprites[i][highY].getComponent('Pai').type)\n                        if (i != highX && self._paiSprites[i][highY].getComponent('Pai').type != -1) {\n                            match = false\n                            break\n                        }\n                    }\n\n                    if (match) {\n                        for (var j = highY; j > lowY; j--) {\n                            cc.log(\"b2: \" + highX + \",\" + j + \":\" + self._paiSprites[highX][j].getComponent('Pai').type)\n                            if (self._paiSprites[highX][j].getComponent('Pai').type != -1) {\n                                match = false\n                                break\n                            }\n                        }\n                    }\n\n                    if (!match) {\n                        match = true\n                        for (var j = highY - 1; j >= lowY; j--) {\n                            cc.log(\"b3: \" + lowX + \",\" + j + \":\" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                            if (j != lowY && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                                match = false\n                                break\n                            }\n                        }\n\n                        if (match) {\n                            for (var i = lowX; i < highX; i++) {\n                                cc.log(\"b4: \" + i + \",\" + lowY + \":\" + self._paiSprites[i][lowY].getComponent('Pai').type)\n                                if (self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                                    match = false\n                                    break\n                                }\n                            }\n                        }\n                    }\n                }\n                if (match) {\n                    currentPai.getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                    currentPai.width = this.paiWidth\n                    currentPai.height = this.paiHeight\n                    self._lastPai.getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                    self._lastPai.width = this.paiWidth\n                    self._lastPai.height = this.paiHeight\n                    currentPai.getComponent('Pai').type = -1\n                    self._lastPai.getComponent('Pai').type = -1\n                    self._pais[self._lastPai.index] = null\n                    self._pais[currentPai.index] = null\n                    currentPai.color = cc.Color.WHITE\n                    self.count += 2\n                    if (self.count >= self.rows * self.columns) {\n                        for (var i = 0; i < this.rows; i++) {\n                            for (var j = 0; j < this.columns; j++) {\n                                self._paiSprites[i][j].getComponent(cc.Sprite).spriteFrame = this.spriteFrames[Math.trunc(Math.random() * 35)]\n                                self._paiSprites[i][j].runAction(self.winSplash())\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        currentPai.color = cc.Color.GRAY\n        self._lastPai = currentPai\n        if (self.coward && currentPai.getComponent('Pai').type != -1) {\n            for (var i = 0; i < 4; i++) {\n                var index = self._pais[currentPai.getComponent('Pai').type * 4 + i]\n                if (index != null && self._paiSprites[index.x][index.y].getComponent('Pai').type != -1) {\n                    self._paiSprites[index.x][index.y].color = cc.Color.GRAY\n                }\n            }\n        }\n        self.originalX = currentPai.getComponent('Pai').x\n        self.originalY = currentPai.getComponent('Pai').y\n    },\n\n    onTouchMove (event, self) {\n        var delta = event.getDelta()\n        var location = event.getLocation()\n        if (self._lastPai != null && self._lastPai.getComponent('Pai').type != -1) {\n            var x = self._lastPai.getComponent('Pai').x\n            var y = self._lastPai.getComponent('Pai').y\n            if (self.moveDirection === -1) {\n                if (Math.abs(delta.x) > Math.abs(delta.y)) {\n                    self.moveDirection = 0\n                    if (y === 0) {\n                        self.moveStart = 0\n                        self.moveMin = 0\n                    } else {\n                        var i = y - 1\n                        while (i >= 0 && self._paiSprites[x][i].getComponent('Pai').type != -1) {\n                            i--\n                        }\n                        self.moveStart = i + 1\n                        while (i >= 0 && self._paiSprites[x][i].getComponent('Pai').type === -1) {\n                            i--\n                        }\n                        self.moveMin = i + 1\n                    }\n                    if (y === self.columns - 1) {\n                        self.moveEnd = self.columns - 1\n                        self.moveMax = self.columns - 1\n                    } else {\n                        var i = y + 1\n                        while (i < self.columns && self._paiSprites[x][i].getComponent('Pai').type != -1) {\n                            i++\n                        }\n                        self.moveEnd = i - 1\n                        while (i < self.columns && self._paiSprites[x][i].getComponent('Pai').type === -1) {\n                            i++\n                        }\n                        self.moveMax = i - 1\n                    }\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                        self._paiSprites[x][j].zIndex = 1000\n                    }\n                } else {\n                    self.moveDirection = 1\n                    if (x === 0) {\n                        self.moveStart = 0\n                        self.moveMin = 0\n                    } else {\n                        var i = x - 1\n                        while (i >= 0 && self._paiSprites[i][y].getComponent('Pai').type != -1) {\n                            i--\n                        }\n                        self.moveStart = i + 1\n                        while (i >= 0 && self._paiSprites[i][y].getComponent('Pai').type === -1) {\n                            i--\n                        }\n                        self.moveMin = i + 1\n                    }\n                    if (x === self.rows - 1) {\n                        self.moveEnd = self.rows - 1\n                    } else {\n                        var i = x + 1\n                        while (i < self.rows && self._paiSprites[i][y].getComponent('Pai').type != -1) {\n                            i++\n                        }\n                        self.moveEnd = i - 1\n                        while (i < self.rows && self._paiSprites[i][y].getComponent('Pai').type === -1) {\n                            i++\n                        }\n                        self.moveMax = i - 1\n                    }\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                        self._paiSprites[i][y].zIndex = 1000\n                    }\n                }\n            }\n\n            if (self.moveDirection === 0) {\n                var row = self._lastPai.getComponent('Pai').x\n                if ((delta.x > 0 && self._paiSprites[row][self.moveEnd].x + delta.x <= self.moveMax * self.paiWidth - self.paddingLeft)\n                    || (delta.x < 0 && self._paiSprites[row][self.moveStart].x + delta.x >= self.moveMin * self.paiWidth - self.paddingLeft)) {\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                        self._paiSprites[row][j].x += delta.x\n                        self._paiSprites[row][j].zIndex = 1000\n                    }\n                }\n            } else {\n                var column = self._lastPai.getComponent('Pai').y\n                if ((delta.y > 0 && self._paiSprites[self.moveEnd][column].y + delta.y <= self.moveMax * self.paiHeight - self.paddingTop)\n                    || (delta.y < 0 && self._paiSprites[self.moveStart][column].y + delta.y >= self.moveMin * self.paiHeight - self.paddingTop)) {\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                        self._paiSprites[i][column].y += delta.y\n                        self._paiSprites[i][column].zIndex = 1000\n                    }\n                }\n            }\n        }\n    },\n\n    onTouchEnd (event, self) {\n        cc.log('touchEnd: ')\n        self.mouseDown = false\n        if (self.moveDirection === 0) {\n            var row = self._lastPai.getComponent('Pai').x\n            var column = self._lastPai.getComponent('Pai').y\n            var currentX = Math.round((self._lastPai.x + this.paddingLeft) / self.paiWidth)\n            var delta = currentX - column\n            var matchFound = false\n            // cc.log('column: ' + column)\n            // cc.log('currentX: ' + currentX)\n            // cc.log('delta: '  + delta)\n            if (delta > 0) {\n                for (var j = self.moveStart; j <= self.moveEnd + delta; j++) {\n                    if (j < self.moveStart + delta && row != self.rows - 1 && row != 0) {\n                        var highX = row + 1\n                        while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\n                            highX++\n                        }\n                        var lowX = row - 1\n                        while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\n                            lowX--\n                        }\n                        //cc.log('lowX: ' + lowX)\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                        if (lowX >= 0 && highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === self._paiSprites[lowX][j].getComponent('Pai').type\n                            && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                            matchFound = true\n                            break\n                        }\n                    }\n                    if (j >= self.moveStart + delta) {\n                        if (row != self.rows - 1) {\n                            var highX = row + 1\n                            while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\n                                highX++\n                            }\n                            //cc.log('highX: ' + highX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type == self._paiSprites[row][j - delta].getComponent('Pai').type\n                                && self._paiSprites[highX][j].getComponent('Pai').type != -1) {\n                                    matchFound = true\n                                    break\n                            }\n                        }\n                        if (row != 0) {\n                            var lowX = row - 1\n                            while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\n                                lowX--\n                            }\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j)\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === self._paiSprites[row][j - delta].getComponent('Pai').type\n                                && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                                matchFound = true\n                                break\n                            }\n                        }\n                    }\n                }\n                cc.log(\"matchFound: \" + matchFound)\n                if (matchFound) {\n                    for (var j = self.moveEnd; j >= self.moveStart; j--) {\n                        //cc.log(\"x: \" + row + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\n                        var type = self._paiSprites[row][j].getComponent('Pai').type\n                        self._paiSprites[row][j + delta].getComponent('Pai').type = type\n                        self._paiSprites[row][j + delta].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[type]\n                        self._paiSprites[row][j + delta].index = self._paiSprites[row][j].index\n                        self._paiSprites[row][j + delta].width = self.paiWidth\n                        self._paiSprites[row][j + delta].height = self.paiHeight\n                        self._pais[self._paiSprites[row][j].index] = cc.v2(row, j + delta)\n                        if (j < self.moveStart + delta) {\n                            self._paiSprites[row][j].getComponent('Pai').type = -1\n                            self._paiSprites[row][j].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                        }\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                        self._paiSprites[row][j].zIndex = 0\n                        self._paiSprites[row][j].width = self.paiWidth\n                        self._paiSprites[row][j].height = self.paiHeight\n                    }\n                    self._lastPai.color = cc.Color.WHITE\n                    self._lastPai = self._paiSprites[row][currentX]\n                    self._lastPai.color = cc.Color.GRAY\n                    if (self.coward) {\n                        for (var i = 0; i < 4; i++) {\n                            var index = self._pais[self._lastPai.getComponent('Pai').type * 4 + i]\n                            if (index != null) {\n                                self._paiSprites[index.x][index.y].color = cc.Color.GRAY\n                            }\n                        }\n                    }\n                } else {\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                        self._paiSprites[row][j].zIndex = 0\n                    }\n                }\n            } else if (delta < 0) {\n                for (var j = self.moveStart + delta; j <= self.moveEnd; j++) {\n                    if (j > self.moveEnd + delta && row != self.rows - 1 && row != 0) {\n                        var highX = row + 1\n                        while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\n                            highX++\n                        }\n                        var lowX = row - 1\n                        while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\n                            lowX--\n                        }\n                        //cc.log('lowX: ' + lowX)\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                        if (highX < self.rows && lowX >= 0 && self._paiSprites[highX][j].getComponent('Pai').type === self._paiSprites[lowX][j].getComponent('Pai').type\n                            && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                            matchFound = true\n                            break\n                        }\n                    }\n                    if (j <= self.moveEnd + delta) {\n                        if (row != self.rows - 1) {\n                            var highX = row + 1\n                            while (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type === -1) {\n                                highX++\n                            }\n                            //cc.log('highX: ' + highX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (highX < self.rows && self._paiSprites[highX][j].getComponent('Pai').type == self._paiSprites[row][j - delta].getComponent('Pai').type\n                                && self._paiSprites[highX][j].getComponent('Pai').type != -1) {\n                                    matchFound = true\n                                    break\n                            }\n                        }\n                        if (row != 0) {\n                            var lowX = row - 1\n                            while (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === -1) {\n                                lowX--\n                            }\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j)\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (lowX >= 0 && self._paiSprites[lowX][j].getComponent('Pai').type === self._paiSprites[row][j - delta].getComponent('Pai').type\n                                && self._paiSprites[lowX][j].getComponent('Pai').type != -1) {\n                                matchFound = true\n                                break\n                            }\n                        }\n                    }\n                }\n                cc.log(\"matchFound: \" + matchFound)\n                if (matchFound) {\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                        //cc.log(\"x: \" + row + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\n                        var type = self._paiSprites[row][j].getComponent('Pai').type\n                        self._paiSprites[row][j + delta].getComponent('Pai').type = type\n                        self._paiSprites[row][j + delta].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[type]\n                        self._paiSprites[row][j + delta].index = self._paiSprites[row][j].index\n                        self._paiSprites[row][j + delta].width = self.paiWidth\n                        self._paiSprites[row][j + delta].height = self.paiHeight\n                        self._pais[self._paiSprites[row][j].index] = cc.v2(row, j + delta)\n                        if (j > self.moveEnd + delta) {\n                            self._paiSprites[row][j].getComponent('Pai').type = -1\n                            self._paiSprites[row][j].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                        }\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                        self._paiSprites[row][j].zIndex = 0\n                        self._paiSprites[row][j].width = self.paiWidth\n                        self._paiSprites[row][j].height = self.paiHeight\n                    }\n                    self._lastPai.color = cc.Color.WHITE\n                    self._lastPai = self._paiSprites[row][currentX]\n                    self._lastPai.color = cc.Color.GRAY\n                    if (self.coward) {\n                        for (var i = 0; i < 4; i++) {\n                            var index = self._pais[self._lastPai.getComponent('Pai').type * 4 + i]\n                            if (index != null) {\n                                self._paiSprites[index.x][index.y].color = cc.Color.GRAY\n                            }\n                        }\n                    }\n                } else {\n                    for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                        self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                        self._paiSprites[row][j].zIndex = 0\n                    }\n                }\n            } else {\n                for (var j = self.moveStart; j <= self.moveEnd; j++) {\n                    self._paiSprites[row][j].x = self._paiSprites[row][j].getComponent('Pai').y * self.paiWidth - self.paddingLeft\n                    self._paiSprites[row][j].zIndex = 0\n                }\n            }\n        } else if (self.moveDirection === 1) {\n            var row = self._lastPai.getComponent('Pai').x\n            var column = self._lastPai.getComponent('Pai').y\n            var currentY = Math.round((self._lastPai.y + self.paddingTop) / self.paiHeight)\n            var delta = currentY - row\n            var matchFound = false\n            cc.log('row: ' + row)\n            cc.log('currentY: ' + currentY)\n            cc.log('delta: '  + delta)\n            if (delta > 0) {\n                for (var i = self.moveStart; i <= self.moveEnd + delta; i++) {\n                    if (i < self.moveStart + delta && column != self.columns - 1 && column != 0) {\n                        var highY = column + 1\n                        while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\n                            highY++\n                        }\n                        var lowY = column - 1\n                        while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\n                            lowY--\n                        }\n                        //cc.log('lowY: ' + lowY)\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                        if (lowY >= 0 && highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === self._paiSprites[i][lowY].getComponent('Pai').type\n                            && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                            matchFound = true\n                            break\n                        }\n                    }\n                    if (i >= self.moveStart + delta) {\n                        if (column != self.columns - 1) {\n                            var highY = column + 1\n                            while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\n                                highY++\n                            }\n                            //cc.log('highY: ' + highY + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type == self._paiSprites[i - delta][column].getComponent('Pai').type\n                                && self._paiSprites[i][highY].getComponent('Pai').type != -1) {\n                                    matchFound = true\n                                    break\n                            }\n                        }\n                        if (column != 0) {\n                            var lowY = column - 1\n                            while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\n                                lowY--\n                            }\n                            //cc.log('lowY: ' + lowY)\n                            //cc.log('lowX: ' + lowX + \", j: \" + \"\" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                            //cc.log('row: ' + row + \", j: \" + j + \", delta\" + delta + \", type: \" + self._paiSprites[row][j - delta].getComponent('Pai').type)\n                            if (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === self._paiSprites[i - delta][column].getComponent('Pai').type\n                                && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                                matchFound = true\n                                break\n                            }\n                        }\n                    }\n                }\n                cc.log(\"matchFound: \" + matchFound)\n                if (matchFound) {\n                    for (var i = self.moveEnd; i >= self.moveStart; i--) {\n                        //cc.log(\"x: \" + i + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\n                        var type = self._paiSprites[i][column].getComponent('Pai').type\n                        self._paiSprites[i + delta][column].getComponent('Pai').type = type\n                        self._paiSprites[i + delta][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[type]\n                        self._paiSprites[i + delta][column].index = self._paiSprites[i][column].index\n                        self._paiSprites[i + delta][column].width = self.paiWidth\n                        self._paiSprites[i + delta][column].height = self.paiHeight\n                        self._pais[self._paiSprites[i][column].index] = cc.v2(i + delta, column)\n                        if (i < self.moveStart + delta) {\n                            self._paiSprites[i][column].getComponent('Pai').type = -1\n                            self._paiSprites[i][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                        }\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                        self._paiSprites[i][column].zIndex = 0\n                        self._paiSprites[i][column].width = self.paiWidth\n                        self._paiSprites[i][column].height = self.paiHeight\n                    }\n                    self._lastPai.color = cc.Color.WHITE\n                    self._lastPai = self._paiSprites[currentY][column]\n                    self._lastPai.color = cc.Color.GRAY\n                    if (self.coward) {\n                        for (var i = 0; i < 4; i++) {\n                            var index = self._pais[self._lastPai.getComponent('Pai').type * 4 + i]\n                            if (index != null) {\n                                self._paiSprites[index.x][index.y].color = cc.Color.GRAY\n                            }\n                        }\n                    }\n                } else {\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                        self._paiSprites[i][column].zIndex = 0\n                    }\n                }\n            } else if (delta < 0) {\n                for (var i = self.moveStart + delta; i <= self.moveEnd; i++) {\n                    if (i > self.moveEnd + delta && column != self.columns - 1 && column != 0) {\n                        var highY = column + 1\n                        while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\n                            highY++\n                        }\n                        var lowY = column - 1\n                        while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\n                            lowY--\n                        }\n                        cc.log('i: ' + i + \", highY: \" + highY)\n                        if (highY < self.columns) {\n                            cc.log(self._paiSprites[i][highY].getComponent('Pai').type)\n                        }\n                        cc.log('i: ' + i + \", lowY: \" + lowY)\n                        if (lowY >= 0) {\n                            cc.log(self._paiSprites[i][lowY].getComponent('Pai').type)\n                        }\n                        //cc.log('highX: ' + highX + \", j: \" + j + \", type: \" + self._paiSprites[highX][j].getComponent('Pai').type)\n                        //cc.log('lowX: ' + lowX + \", j: \" + j + \", type: \" + self._paiSprites[lowX][j].getComponent('Pai').type)\n                        if (highY < self.columns && lowY >= 0 && self._paiSprites[i][highY].getComponent('Pai').type === self._paiSprites[i][lowY].getComponent('Pai').type\n                            && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                            matchFound = true\n                            break\n                        }\n                    }\n                    if (i <= self.moveEnd + delta) {\n                        if (column != self.columns - 1) {\n                            var highY = column + 1\n                            while (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type === -1) {\n                                highY++\n                            }\n                            cc.log('i: ' + i + \", highY: \" + highY + \", type: \" + highY < self.columns ? self._paiSprites[i][highY].getComponent('Pai').type : -1)\n                            cc.log('i: ' + i + \", column: \" + column + \", delta\" + delta + \", type: \" + self._paiSprites[i - delta][column].getComponent('Pai').type)\n                            if (highY < self.columns && self._paiSprites[i][highY].getComponent('Pai').type == self._paiSprites[i - delta][column].getComponent('Pai').type\n                                && self._paiSprites[i][highY].getComponent('Pai').type != -1) {\n                                    matchFound = true\n                                    break\n                            }\n                        }\n                        if (column != 0) {\n                            var lowY = column - 1\n                            while (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === -1) {\n                                lowY--\n                            }\n                            cc.log('i: ' + i + \", lowY: \" + lowY + \", type: \" + lowY >= 0 ? self._paiSprites[i][lowY].getComponent('Pai').type : -1)\n                            cc.log('i: ' + i + \", column: \" + column + \", delta\" + delta + \", type: \" + self._paiSprites[i - delta][column].getComponent('Pai').type)\n                            if (lowY >= 0 && self._paiSprites[i][lowY].getComponent('Pai').type === self._paiSprites[i - delta][column].getComponent('Pai').type\n                                && self._paiSprites[i][lowY].getComponent('Pai').type != -1) {\n                                matchFound = true\n                                break\n                            }\n                        }\n                    }\n                }\n                cc.log(\"matchFound: \" + matchFound)\n                if (matchFound) {\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                        //cc.log(\"x: \" + row + \", y: \" + (j + delta) + \", from: \" + self._paiSprites[row][j + delta].getComponent('Pai').type + \", to: \" + self._paiSprites[row][j].getComponent('Pai').type)\n                        var type = self._paiSprites[i][column].getComponent('Pai').type\n                        self._paiSprites[i + delta][column].getComponent('Pai').type = type\n                        self._paiSprites[i + delta][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[type]\n                        self._paiSprites[i + delta][column].index = self._paiSprites[i][column].index\n                        self._paiSprites[i + delta][column].width = self.paiWidth\n                        self._paiSprites[i + delta][column].height = self.paiHeight\n                        self._pais[self._paiSprites[i][column].index] = cc.v2(i + delta, column)\n                        if (i > self.moveEnd + delta) {\n                            self._paiSprites[i][column].getComponent('Pai').type = -1\n                            self._paiSprites[i][column].getComponent(cc.Sprite).spriteFrame = self.spriteFrames[34]\n                        }\n                        //cc.log('set row: ' + row + ', j: ' + j + \" to \" + self._paiSprites[row][j].getComponent('Pai').x)\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                        self._paiSprites[i][column].zIndex = 0\n                        self._paiSprites[i][column].width = self.paiWidth\n                        self._paiSprites[i][column].height = self.paiHeight\n                    }\n                    self._lastPai.color = cc.Color.WHITE\n                    self._lastPai = self._paiSprites[currentY][column]\n                    self._lastPai.color = cc.Color.GRAY\n                    if (self.coward) {\n                        for (var i = 0; i < 4; i++) {\n                            var index = self._pais[self._lastPai.getComponent('Pai').type * 4 + i]\n                            if (index != null) {\n                                self._paiSprites[index.x][index.y].color = cc.Color.GRAY\n                            }\n                        }\n                    }\n                } else {\n                    for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                        self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                        self._paiSprites[i][column].zIndex = 0\n                    }\n                }\n            } else {\n                for (var i = self.moveStart; i <= self.moveEnd; i++) {\n                    self._paiSprites[i][column].y = self._paiSprites[i][column].getComponent('Pai').x * self.paiHeight - self.paddingTop\n                    self._paiSprites[i][column].zIndex = 0\n                }\n            }\n        }\n        self.moveDirection = -1\n    },\n\n    shuffle() {\n        var array = new Array(this.rows * this.columns)\n        var m = array.length, t, index;\n        for (var i = 0; i < this.rows * this.columns; i++) {\n            array[i] = i\n        }\n\n        // While there remain elements to shuffle…\n        while (m) {\n          // Pick a remaining element…\n          index = Math.floor(Math.random() * m--);\n\n          // And swap it with the current element.\n          t = array[m];\n          array[m] = array[index];\n          array[index] = t;\n        }\n\n        for (var i = 0; i < this.rows; i++) {\n            for (var j = 0; j < this.columns; j++) {\n                var index = i * this.columns + j\n                var type = Math.trunc(array[index] / 4)\n                this._paiSprites[i][j].getComponent(cc.Sprite).spriteFrame = this.spriteFrames[type]\n                this._paiSprites[i][j].getComponent('Pai').type = type\n                this._paiSprites[i][j].getComponent('Pai').x = i\n                this._paiSprites[i][j].getComponent('Pai').y = j\n                this._paiSprites[i][j].width = this.paiWidth\n                this._paiSprites[i][j].height = this.paiHeight\n                this._paiSprites[i][j].index = array[index]\n                cc.log(array[index] + \", \" + i + \", \" + j)\n                this._pais[array[index]] = cc.v2(i, j)\n            }\n        }\n    },\n\n    winSplash () {\n        var init = cc.moveTo(0, cc.v2(Math.random() * this.paiWidth * this.columns - this.paddingLeft, this.paiHeight * this.rows / 2))\n        var start = cc.moveBy(Math.random() / 2, cc.v2(0, -this.paiHeight)).easing(cc.easeCubicActionOut());\n        var scaleUp = cc.scaleTo(Math.random() / 2, 0.8, 0.8)\n        var move = cc.moveBy(Math.random() * 3, cc.v2(0, -this.paiHeight * (this.rows - 2))).easing(cc.easeCubicActionOut());\n        var scaleDown = cc.scaleTo(Math.random() / 2, 0.5, 0.5)\n        var end = cc.moveBy(Math.random() / 2, cc.v2(0, -this.paiHeight))\n        return cc.repeatForever(cc.sequence(init, start, scaleUp, move, scaleDown, end))\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n});\n"]}